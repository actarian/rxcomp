{"version":3,"sources":["docs/js/test.js","../../src/core/directive.js","../../src/core/component.js","../../src/core/context.js","../../src/core/structure.js","../../src/module/module.js","../../src/class/class.directive.js","../../src/event/event.directive.js","../../src/for/for.item.js","../../src/for/for.structure.js","../../src/if/if.structure.js","../../src/inner-html/inner-html.directive.js","../../src/json/json.pipe.js","../../src/style/style.directive.js","../../todomvc/js/date/date.pipe.js","../../todomvc/js/test.js"],"names":["global","factory","exports","module","require","define","amd","self","rxjs","operators","this","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_inheritsLoose","subClass","superClass","prototype","create","constructor","__proto__","_setPrototypeOf","o","p","setPrototypeOf","_construct","Parent","args","Class","Reflect","construct","sham","Proxy","Date","toString","call","e","isNativeReflectConstruct","a","push","apply","instance","Function","bind","arguments","Directive","Component","RESERVED_PROPERTIES","Context","_Component","descriptors","_this","instancePrototypeDescriptors","filterDescriptors","getOwnPropertyDescriptors","getPrototypeOf","instanceDescriptors","defineProperties","ReferenceError","_assertThisInitialized","assign","filteredDescriptors","keys","forEach","indexOf","value","_len","Array","_key","Structure","ID","CONTEXTS","NODES","ORDER","Module","options","bootstrap","pipes","x","meta","name","node","document","querySelector","selector","factories","sort","b","reduce","c","unshift","selectors","unwrapSelectors","nodes$","Subject","unsubscribe$","_proto","makeContext","parentInstance","makeInstance","parentNode","isComponent","getParentInstance","changes$","BehaviorSubject","pushChanges","next","parse","onView","context","inputs","makeInputs","outputs","makeOutputs","onInit","pipe","takeUntil","subscribe","changes","resolveInputsOutputs","onChanges","makeFunction","expression","params","join","transforms","getPipesSegments","shift","trim","transformOptionalChaining","transform","getPipeParamsSegments","debug","replace","makeInput","getContext","getAttribute","makeOutput","_this2","outputFunction","output$","tap","event","resolve","remove","ids","traverseDown","_i","_Object$entries","entries","_Object$entries$_i","id","complete","onDestroy","deleteContext","destroy","evaluate","text","_this3","undefined","parse_func_","console","error","message","childNodes","child","nodeType","getContextByNode","nodeExpression","nodeValue","replacedText","textNode","createTextNode","replaceChild","expressionFunc","payload","_this4","_this5","_this6","inputFunction","getInstance","window","_this7","traverseUp","previous","tokens","split","compile","_this8","querySelectorsAll","map","match","filter","use","segments","word","block","t","substr","className","classList","has","attribute","hasAttribute","nodeName","toLowerCase","matchSelectors","results","template","innerHTML","callback","result","j","traversePrevious","previousSibling","traverseNext","nextSibling","rxcompId","rxcompNodeId","dataset","nodeContexts","index","splice","current","ClassDirective","_Directive","classFunction","add","EventDirective","event$","fromEvent","shareReplay","ForItem","_Context","$key","$value","count","Constructor","protoProps","staticProps","get","even","ForStructure","_Structure","forbegin","createComment","forend","insertBefore","removeAttribute","getExpressionTokens","forFunction","iterable","instances","isArray","array","total","Math","max","clonedNode","cloneNode","forItemContext","removeChild","expressions","forExpressions","keyValueMatches","indexExpressions","IfStructure","ifbegin","ifend","ifFunction","InnerHtmlDirective","innerHtmlExpression","JsonPipe","JSON","stringify","StyleDirective","styleFunction","style","DatePipe","locale","dateStyle","timeStyle","toLocaleDateString","TestComponent","items","object","date"],"mappings":"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","file":"docs/js/test.min.js","sourcesContent":[null,"export default class Directive {\n\n}\n","export default class Component {\n\n}\n","// import { BehaviorSubject, Subject } from 'rxjs';\nimport Component from './component';\n\nconst RESERVED_PROPERTIES = ['constructor', 'rxcompId', 'onInit', 'onChanges', 'onDestroy', 'pushChanges', 'changes$', 'unsubscribe$'];\n\nexport default class Context extends Component {\n\n\tconstructor(instance, descriptors) {\n\t\tsuper();\n\t\t// const instancePrototypeDescriptors = {};\n\t\tconst instancePrototypeDescriptors = Context.filterDescriptors(Object.getOwnPropertyDescriptors(Object.getPrototypeOf(instance)), instance);\n\t\t// console.log('instancePrototypeDescriptors', instancePrototypeDescriptors);\n\t\tconst instanceDescriptors = Context.filterDescriptors(Object.getOwnPropertyDescriptors(instance), instance);\n\t\t// console.log('instanceDescriptors', instanceDescriptors);\n\t\t/*\n\t\tconst subjects = {\n\t\t\tchanges$: {\n\t\t\t\tvalue: new BehaviorSubject(this),\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t},\n\t\t\tunsubscribe$: {\n\t\t\t\tvalue: new Subject(),\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t}\n\t\t};\n\t\tObject.defineProperties(this, Object.assign(instancePrototypeDescriptors, instanceDescriptors, subjects, descriptors || {}));\n\t\t*/\n\t\t// console.log(instancePrototypeDescriptors, instanceDescriptors);\n\t\tObject.defineProperties(this, Object.assign(instancePrototypeDescriptors, instanceDescriptors));\n\t}\n\n\t/*\n\tpushChanges() {\n\t\tthis.changes$.next(this);\n\t}\n\t*/\n\n\tstatic filterDescriptors(descriptors, instance) {\n\t\tconst filteredDescriptors = {};\n\t\tObject.keys(descriptors).forEach(key => {\n\t\t\tif (RESERVED_PROPERTIES.indexOf(key) === -1) {\n\t\t\t\t// console.log('Context.filterDescriptors', key);\n\t\t\t\tconst descriptor = descriptors[key];\n\t\t\t\tif (typeof descriptor.value == \"function\") {\n\t\t\t\t\tdescriptor.value = (...args) => {\n\t\t\t\t\t\tinstance[key].apply(instance, args);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tfilteredDescriptors[key] = descriptor;\n\t\t\t}\n\t\t});\n\t\t// console.log(filteredDescriptors);\n\t\treturn filteredDescriptors;;\n\t}\n\n}\n","export default class Structure {\n\n}\n","import { BehaviorSubject, Subject } from 'rxjs';\nimport { takeUntil, tap } from 'rxjs/operators';\nimport Component from '../core/component';\nimport Context from '../core/context';\nimport Directive from '../core/directive';\nimport Structure from '../core/structure';\n\nlet ID = 0;\nconst CONTEXTS = {};\nconst NODES = {};\nconst ORDER = [Structure, Component, Directive];\n\nexport default class Module {\n\n\tconstructor(options) {\n\t\tif (!options) {\n\t\t\tthrow ('missing options');\n\t\t}\n\t\tif (!options.bootstrap) {\n\t\t\tthrow ('missing bootstrap');\n\t\t}\n\t\tthis.options = options;\n\t\tconst pipes = {};\n\t\tif (options.pipes) {\n\t\t\toptions.pipes.forEach(x => pipes[x.meta.name] = x);\n\t\t}\n\t\tthis.pipes = pipes;\n\t\tconst bootstrap = options.bootstrap;\n\t\tthis.node = document.querySelector(bootstrap.meta.selector);\n\t\tif (!this.node) {\n\t\t\tthrow (`missing node ${bootstrap.meta.selector}`);\n\t\t}\n\t\toptions.factories.sort((a, b) => {\n\t\t\tconst ai = ORDER.reduce((p, c, i) => a.prototype instanceof c ? i : p, -1);\n\t\t\tconst bi = ORDER.reduce((p, c, i) => b.prototype instanceof c ? i : p, -1);\n\t\t\treturn ai - bi;\n\t\t});\n\t\toptions.factories.unshift(bootstrap);\n\t\tthis.selectors = Module.unwrapSelectors(options.factories);\n\t\tthis.nodes$ = new Subject();\n\t\tthis.unsubscribe$ = new Subject();\n\t\t// this.root = this.makeInstance(this.node, bootstrap, bootstrap.meta.selector, window);\n\t}\n\n\tmakeContext(instance, parentInstance, node, selector) {\n\t\tconst context = Module.makeContext(this, instance, parentInstance, node, instance.constructor, selector);\n\t\t// console.log('Module.makeContext', context, context.instance, context.node);\n\t\treturn context;\n\t}\n\n\tmakeInstance(node, factory, selector, parentInstance, args) {\n\t\tif (parentInstance || node.parentNode) {\n\t\t\tconst isComponent = factory.prototype instanceof Component;\n\t\t\tconst meta = factory.meta;\n\t\t\t// collect parentInstance scope\n\t\t\tparentInstance = parentInstance || this.getParentInstance(node.parentNode);\n\t\t\tif (!parentInstance) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// creating factory instance\n\t\t\tconst instance = new factory(...(args || []));\n\t\t\t// injecting changes$ and unsubscribe$ subjects\n\t\t\tObject.defineProperties(instance, {\n\t\t\t\tchanges$: {\n\t\t\t\t\tvalue: new BehaviorSubject(instance),\n\t\t\t\t\twritable: false,\n\t\t\t\t\tenumerable: false,\n\t\t\t\t},\n\t\t\t\tunsubscribe$: {\n\t\t\t\t\tvalue: new Subject(),\n\t\t\t\t\twritable: false,\n\t\t\t\t\tenumerable: false,\n\t\t\t\t}\n\t\t\t});\n\t\t\t// injecting instance pushChanges method\n\t\t\tconst module = this;\n\t\t\tinstance.pushChanges = function() {\n\t\t\t\t/*\n\t\t\t\tif (isComponent) {\n\t\t\t\t\tmodule.parse(node, instance);\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t\t/*\n\t\t\t\tconsole.log(new Error(`pushChanges ${instance.constructor.name}`).stack);\n\t\t\t\t*/\n\t\t\t\tthis.changes$.next(this);\n\t\t\t\t// parse component text nodes\n\t\t\t\tif (isComponent) {\n\t\t\t\t\t// console.log('Module.parse', instance.constructor.name);\n\t\t\t\t\tmodule.parse(node, instance);\n\t\t\t\t}\n\t\t\t\t// calling onView event\n\t\t\t\tif (typeof instance.onView === 'function') {\n\t\t\t\t\t// console.log('onView', instance.constructor.name);\n\t\t\t\t\tinstance.onView();\n\t\t\t\t}\n\t\t\t};\n\t\t\t// creating instance context\n\t\t\tconst context = Module.makeContext(this, instance, parentInstance, node, factory, selector);\n\t\t\t// creating component input and outputs\n\t\t\tif (isComponent && meta) {\n\t\t\t\tcontext.inputs = this.makeInputs(meta, instance);\n\t\t\t\tcontext.outputs = this.makeOutputs(meta, instance);\n\t\t\t}\n\t\t\t// calling onInit event\n\t\t\tif (typeof instance.onInit === 'function') {\n\t\t\t\tinstance.onInit();\n\t\t\t}\n\t\t\t// subscribe to parent changes\n\t\t\tif (parentInstance.changes$) {\n\t\t\t\tparentInstance.changes$.pipe(\n\t\t\t\t\t// filter(() => node.parentNode),\n\t\t\t\t\ttakeUntil(instance.unsubscribe$)\n\t\t\t\t).subscribe(changes => {\n\t\t\t\t\t// resolve component input outputs\n\t\t\t\t\tif (isComponent && meta) {\n\t\t\t\t\t\tthis.resolveInputsOutputs(instance, changes);\n\t\t\t\t\t}\n\t\t\t\t\t// calling onChanges event with parentInstance\n\t\t\t\t\tif (typeof instance.onChanges === 'function') {\n\t\t\t\t\t\t// console.log('onChanges', instance.constructor.name);\n\t\t\t\t\t\t// console.log('onChanges', instance.constructor.meta.selector, changes);\n\t\t\t\t\t\tinstance.onChanges(changes);\n\t\t\t\t\t}\n\t\t\t\t\t// push instance changes for subscribers\n\t\t\t\t\tinstance.pushChanges();\n\t\t\t\t});\n\t\t\t}\n\t\t\t/*\n\t\t\t// parse component text nodes\n\t\t\tif (isComponent) {\n\t\t\t\tthis.parse(node, instance);\n\t\t\t}\n\t\t\t*/\n\t\t\treturn instance;\n\t\t}\n\t}\n\n\tmakeFunction(expression, params = ['$instance']) {\n\t\tif (!expression) {\n\t\t\treturn () => { return null; };\n\t\t}\n\t\tconst args = params.join(',');\n\t\tconst pipes = this.pipes;\n\t\tconst transforms = Module.getPipesSegments(expression);\n\t\texpression = transforms.shift().trim();\n\t\texpression = this.transformOptionalChaining(expression);\n\t\t// console.log(pipes, transforms, expression);\n\t\t// console.log(transforms.length, params);\n\t\t// keyword 'this' represents changes from func.apply(changes, instance)\n\t\tif (transforms.length) {\n\t\t\texpression = transforms.reduce((expression, transform, i) => {\n\t\t\t\tconst params = Module.getPipeParamsSegments(transform);\n\t\t\t\tconst name = params.shift().trim();\n\t\t\t\tconst pipe = pipes[name];\n\t\t\t\tif (!pipe || typeof pipe.transform !== 'function') {\n\t\t\t\t\tthrow (`missing pipe ${name}`);\n\t\t\t\t}\n\t\t\t\treturn `$$pipes.${name}.transform(${expression},${params.join(',')})`;\n\t\t\t}, expression);\n\t\t\t// console.log('expression', expression);\n\t\t\tconst expression_func = new Function(this.options.debug ? `with(this) {\n\t\t\t\treturn (function (${args}, $$module) {\n\t\t\t\t\tconst $$pipes = $$module.pipes;\n\t\t\t\t\tlet $$$;\n\t\t\t\t\ttry {\n\t\t\t\t\t\t$$$ = ${expression};\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t// console.error('${expression.replace(/\\'/g,'\"')}', this);\n\t\t\t\t\t\t$$$ = e.message;\n\t\t\t\t\t}\n\t\t\t\t\treturn $$$;\n\t\t\t\t}.bind(this)).apply(this, arguments);\n\t\t\t}` : `with(this) {\n\t\t\t\treturn (function (${args}, $$module) {\n\t\t\t\t\tconst $$pipes = $$module.pipes;\n\t\t\t\t\treturn ${expression};\n\t\t\t\t}.bind(this)).apply(this, arguments);\n\t\t\t}`);\n\t\t\treturn expression_func;\n\t\t} else {\n\t\t\t// console.log('expression', args, expression);\n\t\t\tconst expression_func = new Function(this.options.debug ? `with(this) {\n\t\t\t\treturn (function (${args}, $$module) {\n\t\t\t\t\t// console.log('${expression.replace(/\\'/g,'\"')}', this);\n\t\t\t\t\tlet $$$;\n\t\t\t\t\ttry {\n\t\t\t\t\t\t$$$ = ${expression};\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t// console.error('${expression.replace(/\\'/g,'\"')}', this);\n\t\t\t\t\t\t$$$ = e.message;\n\t\t\t\t\t}\n\t\t\t\t\treturn $$$;\n\t\t\t\t}.bind(this)).apply(this, arguments);\n\t\t\t}` : `with(this) {\n\t\t\t\treturn (function (${args}, module) {\n\t\t\t\t\treturn ${expression};\n\t\t\t\t}.bind(this)).apply(this, arguments);\n\t\t\t}`);\n\t\t\treturn expression_func;\n\t\t}\n\t}\n\n\tmakeInput(instance, name) {\n\t\tconst context = Module.getContext(instance);\n\t\tconst node = context.node;\n\t\tconst expression = node.getAttribute(`[${name}]`);\n\t\treturn this.makeFunction(expression);\n\t}\n\n\tmakeOutput(instance, name) {\n\t\tconst context = Module.getContext(instance);\n\t\tconst node = context.node;\n\t\tconst parentInstance = context.parentInstance;\n\t\tconst expression = node.getAttribute(`(${name})`);\n\t\tconst outputFunction = this.makeFunction(expression, ['$event']);\n\t\tconst output$ = new Subject().pipe(\n\t\t\ttap((event) => {\n\t\t\t\tthis.resolve(outputFunction, parentInstance, event);\n\t\t\t})\n\t\t);\n\t\toutput$.pipe(\n\t\t\ttakeUntil(instance.unsubscribe$)\n\t\t).subscribe();\n\t\tinstance[name] = output$;\n\t\treturn outputFunction;\n\t}\n\n\tremove(node) {\n\t\tconst ids = [];\n\t\tModule.traverseDown(node, (node) => {\n\t\t\tfor (let [id, context] of Object.entries(CONTEXTS)) {\n\t\t\t\tif (context.node === node) {\n\t\t\t\t\tconst instance = context.instance;\n\t\t\t\t\tinstance.unsubscribe$.next();\n\t\t\t\t\tinstance.unsubscribe$.complete();\n\t\t\t\t\tif (typeof instance.onDestroy === 'function') {\n\t\t\t\t\t\tinstance.onDestroy();\n\t\t\t\t\t}\n\t\t\t\t\tids.push(id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tids.forEach(id => Module.deleteContext(id));\n\t\t// console.log('Module.remove', ids);\n\t\treturn node;\n\t}\n\n\tdestroy() {\n\t\tthis.remove(this.node);\n\t\tthis.unsubscribe$.next();\n\t\tthis.unsubscribe$.complete();\n\t}\n\n\tevaluate(text, instance) {\n\t\tconst parse_eval_ = (...args) => {\n\t\t\tconst expression = args[1];\n\t\t\t// console.log('expression', expression);\n\t\t\ttry {\n\t\t\t\tconst parse_func_ = this.makeFunction(expression);\n\t\t\t\treturn this.resolve(parse_func_, instance, instance);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t\treturn e.message;\n\t\t\t}\n\t\t};\n\t\t// console.log(text);\n\t\treturn text.replace(/\\{{2}((([^{}])|(\\{[^{}]+?\\}))*?)\\}{2}/g, parse_eval_);\n\t}\n\n\tparse(node, instance) {\n\t\t// console.log('parse', instance.constructor.name, node);\n\t\tfor (let i = 0; i < node.childNodes.length; i++) {\n\t\t\tconst child = node.childNodes[i];\n\t\t\tif (child.nodeType === 1) {\n\t\t\t\tconst context = Module.getContextByNode(child);\n\t\t\t\tif (!context) {\n\t\t\t\t\tthis.parse(child, instance);\n\t\t\t\t}\n\t\t\t} else if (child.nodeType === 3) {\n\t\t\t\tconst expression = child.nodeExpression || child.nodeValue;\n\t\t\t\tconst replacedText = this.evaluate(expression, instance);\n\t\t\t\t// console.log(instance.constructor.name, expression, replacedText);\n\t\t\t\tif (expression !== replacedText) {\n\t\t\t\t\tchild.nodeExpression = child.nodeExpression || expression;\n\t\t\t\t\tconst textNode = document.createTextNode(replacedText);\n\t\t\t\t\tnode.replaceChild(textNode, child);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tresolve(expressionFunc, changes, payload) {\n\t\treturn expressionFunc.apply(changes, [payload, this]);\n\t}\n\n\tmakeInputs(meta, instance) {\n\t\tconst inputs = {};\n\t\tif (meta.inputs) {\n\t\t\tmeta.inputs.forEach((key, i) => inputs[key] = this.makeInput(instance, key));\n\t\t}\n\t\treturn inputs;\n\t}\n\n\tmakeOutputs(meta, instance) {\n\t\tconst outputs = {};\n\t\tif (meta.outputs) {\n\t\t\tmeta.outputs.forEach((key, i) => outputs[key] = this.makeOutput(instance, key));\n\t\t}\n\t\treturn outputs;\n\t}\n\n\tresolveInputsOutputs(instance, changes) {\n\t\tconst context = Module.getContext(instance);\n\t\tconst parentInstance = context.parentInstance;\n\t\tconst inputs = context.inputs;\n\t\tObject.keys(inputs).forEach(key => {\n\t\t\tconst inputFunction = inputs[key];\n\t\t\tconst value = this.resolve(inputFunction, parentInstance, instance);\n\t\t\tinstance[key] = value;\n\t\t});\n\t\t/*\n\t\tconst outputs = context.outputs;\n\t\tObject.keys(outputs).forEach(key => {\n\t\t\tconst inpuoutputFunctiontFunction = outputs[key];\n\t\t\tconst value = this.resolve(outputFunction, parentInstance, null);\n\t\t\t// console.log(`setted -> ${key}`, value);\n\t\t});\n\t\t*/\n\t}\n\n\tgetInstance(node) {\n\t\tif (node === document) {\n\t\t\treturn window;\n\t\t}\n\t\tconst context = Module.getContextByNode(node);\n\t\tif (context) {\n\t\t\treturn context.instance;\n\t\t}\n\t}\n\n\tgetParentInstance(node) {\n\t\treturn Module.traverseUp(node, (node) => {\n\t\t\treturn this.getInstance(node);\n\t\t});\n\t}\n\n\ttransformOptionalChaining(expression) {\n\t\tconst regex = /(\\w+(\\?\\.))+([\\.|\\w]+)/g;\n\t\tlet previous;\n\t\texpression = expression.replace(regex, (...args) => {\n\t\t\tconst tokens = args[0].split('?.');\n\t\t\tfor (let i = 0; i < tokens.length - 1; i++) {\n\t\t\t\tconst a = i > 0 ? `(${tokens[i]} = ${previous})` : tokens[i];\n\t\t\t\tconst b = tokens[i + 1];\n\t\t\t\tprevious = i > 0 ? `${a}.${b}` : `(${a} ? ${a}.${b} : void 0)`;\n\t\t\t\t// log(previous);\n\t\t\t}\n\t\t\treturn previous || '';\n\t\t});\n\t\treturn expression;\n\t}\n\n\tcompile(node, parentInstance) {\n\t\tconst instances = Module.querySelectorsAll(node, this.selectors, []).map(match => {\n\t\t\tconst instance = this.makeInstance(match.node, match.factory, match.selector, parentInstance);\n\t\t\tif (match.factory.prototype instanceof Component) {\n\t\t\t\tparentInstance = undefined;\n\t\t\t}\n\t\t\treturn instance;\n\t\t}).filter(x => x);\n\t\t// console.log('compile', instances, node, parentInstance);\n\t\treturn instances;\n\t}\n\n\tstatic use(options) {\n\t\tconst module = new Module(options);\n\t\tconst instances = module.compile(module.node, window);\n\t\tconst instance = instances[0];\n\t\t// if (instance instanceof module.options.bootstrap) {\n\t\tinstance.pushChanges();\n\t\t// }\n\t\treturn module;\n\t}\n\n\tstatic getPipesSegments(expression) {\n\t\tconst segments = [];\n\t\tlet i = 0,\n\t\t\tword = '',\n\t\t\tblock = 0;\n\t\tconst t = expression.length;\n\t\twhile (i < t) {\n\t\t\tconst c = expression.substr(i, 1);\n\t\t\tif (c === '{' || c === '(' || c === '[') {\n\t\t\t\tblock++;\n\t\t\t}\n\t\t\tif (c === '}' || c === ')' || c === ']') {\n\t\t\t\tblock--;\n\t\t\t}\n\t\t\tif (c === '|' && block === 0) {\n\t\t\t\tif (word.length) {\n\t\t\t\t\tsegments.push(word);\n\t\t\t\t}\n\t\t\t\tword = '';\n\t\t\t} else {\n\t\t\t\tword += c;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\t\tif (word.length) {\n\t\t\tsegments.push(word);\n\t\t}\n\t\treturn segments;\n\t}\n\n\tstatic getPipeParamsSegments(expression) {\n\t\tconst segments = [];\n\t\tlet i = 0,\n\t\t\tword = '',\n\t\t\tblock = 0;\n\t\tconst t = expression.length;\n\t\twhile (i < t) {\n\t\t\tconst c = expression.substr(i, 1);\n\t\t\tif (c === '{' || c === '(' || c === '[') {\n\t\t\t\tblock++;\n\t\t\t}\n\t\t\tif (c === '}' || c === ')' || c === ']') {\n\t\t\t\tblock--;\n\t\t\t}\n\t\t\tif (c === ':' && block === 0) {\n\t\t\t\tif (word.length) {\n\t\t\t\t\tsegments.push(word);\n\t\t\t\t}\n\t\t\t\tword = '';\n\t\t\t} else {\n\t\t\t\tword += c;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\t\tif (word.length) {\n\t\t\tsegments.push(word);\n\t\t}\n\t\treturn segments;\n\t}\n\n\tstatic unwrapSelectors(factories) {\n\t\tconst selectors = [];\n\t\tfactories.forEach(factory => {\n\t\t\tfactory.meta.selector.split(',').forEach(selector => {\n\t\t\t\tselector = selector.trim();\n\t\t\t\tif (selector.indexOf('.') === 0) {\n\t\t\t\t\tconst className = selector.replace(/\\./g, '');\n\t\t\t\t\tselectors.push((node) => {\n\t\t\t\t\t\tconst match = node.classList.has(className);\n\t\t\t\t\t\treturn match ? { node, factory, selector } : false;\n\t\t\t\t\t});\n\t\t\t\t} else if (selector.match(/\\[(.+)\\]/)) {\n\t\t\t\t\tconst attribute = selector.substr(1, selector.length - 2);\n\t\t\t\t\tselectors.push((node) => {\n\t\t\t\t\t\tconst match = node.hasAttribute(attribute);\n\t\t\t\t\t\treturn match ? { node, factory, selector } : false;\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tselectors.push((node) => {\n\t\t\t\t\t\tconst match = node.nodeName.toLowerCase() === selector.toLowerCase();\n\t\t\t\t\t\treturn match ? { node, factory, selector } : false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn selectors;\n\t}\n\n\tstatic matchSelectors(node, selectors, results) {\n\t\tselectors.forEach(selector => {\n\t\t\tconst match = selector(node);\n\t\t\tif (match) {\n\t\t\t\tconst factory = match.factory;\n\t\t\t\tif (factory.prototype instanceof Component && factory.meta.template) {\n\t\t\t\t\tnode.innerHTML = factory.meta.template;\n\t\t\t\t}\n\t\t\t\tresults.push(match);\n\t\t\t}\n\t\t});\n\t\treturn results;\n\t}\n\n\tstatic querySelectorsAll(node, selectors, results) {\n\t\tif (node.nodeType === 1) {\n\t\t\tresults = this.matchSelectors(node, selectors, results);\n\t\t}\n\t\tconst childNodes = node.childNodes;\n\t\tif (childNodes) {\n\t\t\tfor (let i = 0; i < childNodes.length; i++) {\n\t\t\t\tresults = this.querySelectorsAll(childNodes[i], selectors, results);\n\t\t\t}\n\t\t}\n\t\treturn results;\n\t}\n\n\tstatic traverseUp(node, callback, i = 0) {\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\t\tconst result = callback(node, i);\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t\treturn this.traverseUp(node.parentNode, callback, i + 1);\n\t}\n\n\tstatic traverseDown(node, callback, i = 0) {\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\t\tlet result = callback(node, i);\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t\tif (node.nodeType === 1) {\n\t\t\tlet j = 0,\n\t\t\t\tt = node.childNodes.length;\n\t\t\twhile (j < t && !result) {\n\t\t\t\tresult = this.traverseDown(node.childNodes[j], callback, i + 1);\n\t\t\t\tj++;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tstatic traversePrevious(node, callback, i = 0) {\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\t\tconst result = callback(node, i);\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t\treturn this.traversePrevious(node.previousSibling, callback, i + 1);\n\t}\n\n\tstatic traverseNext(node, callback, i = 0) {\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\t\tconst result = callback(node, i);\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t\treturn this.traverseNext(node.nextSibling, callback, i + 1);\n\t}\n\n\tstatic getContext(instance) {\n\t\treturn CONTEXTS[instance.rxcompId];\n\t}\n\n\tstatic makeContext(module, instance, parentInstance, node, factory, selector) {\n\t\tinstance.rxcompId = ++ID;\n\t\tconst context = { module, instance, parentInstance, node, factory, selector };\n\t\tconst rxcompNodeId = node.dataset.rxcompId = (node.dataset.rxcompId || ++ID);\n\t\tconst nodeContexts = NODES[rxcompNodeId] || (NODES[rxcompNodeId] = []);\n\t\tnodeContexts.push(context);\n\t\treturn CONTEXTS[instance.rxcompId] = context;\n\t}\n\n\tstatic deleteContext(id) {\n\t\tconst context = CONTEXTS[id];\n\t\tconst nodeContexts = NODES[context.node.dataset.id];\n\t\tif (nodeContexts) {\n\t\t\tconst index = nodeContexts.indexOf(context);\n\t\t\tif (index !== -1) {\n\t\t\t\tnodeContexts.splice(index, 1);\n\t\t\t}\n\t\t}\n\t\tdelete CONTEXTS[id];\n\t}\n\n\tstatic getContextByNode(node) {\n\t\tlet context;\n\t\tconst nodeContexts = NODES[node.dataset.rxcompId];\n\t\tif (nodeContexts) {\n\t\t\tcontext = nodeContexts.reduce((previous, current) => {\n\t\t\t\tif (current.node === node && current.factory.prototype instanceof Component) {\n\t\t\t\t\tif (previous && current.factory.prototype instanceof Context) {\n\t\t\t\t\t\treturn previous;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn current;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn previous;\n\t\t\t\t}\n\t\t\t}, null);\n\t\t}\n\t\treturn context;\n\t\t/*\n\t\tconst context = Object.keys(CONTEXTS).reduce((previous, id) => {\n\t\t\tconst current = CONTEXTS[id];\n\t\t\tif (current.node === node && current.factory.prototype instanceof Component) {\n\t\t\t\tif (previous && current.factory.prototype instanceof Context) {\n\t\t\t\t\treturn previous;\n\t\t\t\t} else {\n\t\t\t\t\treturn current;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn previous;\n\t\t\t}\n\t\t}, null);\n\t\t\treturn context;\n\t\t*/\n\t\t/*\n\t\tlet id = Object.keys(CONTEXTS).find(id => CONTEXTS[id].node === node && CONTEXTS[id].factory.prototype instanceof Component);\n\t\tif (id) {\n\t\t\tconst context = CONTEXTS[id];\n\t\t\treturn context;\n\t\t}\n\t\t*/\n\t}\n\n}\n","import Directive from '../core/directive';\nimport Module from '../module/module';\n\nexport default class ClassDirective extends Directive {\n\n\tonInit() {\n\t\tconst context = Module.getContext(this);\n\t\tconst module = context.module;\n\t\tconst node = context.node;\n\t\tconst expression = node.getAttribute('[class]');\n\t\tthis.classFunction = module.makeFunction(expression);\n\t\t// this.classList = [...node.classList.keys()];\n\t\t// console.log('ClassDirective.onInit', this.classList, expression);\n\t}\n\n\tonChanges(changes) {\n\t\tconst context = Module.getContext(this);\n\t\tconst module = context.module;\n\t\tconst node = context.node;\n\t\tconst classList = module.resolve(this.classFunction, changes, this);\n\t\tObject.keys(classList).forEach(key => {\n\t\t\tif (classList[key]) {\n\t\t\t\tnode.classList.add(key);\n\t\t\t} else {\n\t\t\t\tnode.classList.remove(key);\n\t\t\t}\n\t\t});\n\t\t// console.log('ClassDirective.onChanges', classList);\n\t}\n\n}\n\nClassDirective.meta = {\n\tselector: `[[class]]`,\n};\n","import { fromEvent } from 'rxjs';\nimport { shareReplay, takeUntil } from 'rxjs/operators';\nimport Directive from '../core/directive';\nimport Module from '../module/module';\n\nconst EVENTS = ['click', 'mousedown', 'mouseup', 'touchstart', 'touchmove', 'touchend', 'keydown', 'keyup', 'input', 'change', 'loaded'];\n\nexport default class EventDirective extends Directive {\n\n\tonInit() {\n\t\tconst context = Module.getContext(this);\n\t\tconst module = context.module;\n\t\tconst node = context.node;\n\t\tconst selector = context.selector;\n\t\tconst parentInstance = context.parentInstance;\n\t\tconst event = this.event = selector.replace(/\\[|\\]|\\(|\\)/g, '');\n\t\tconst event$ = this.event$ = fromEvent(node, event).pipe(shareReplay(1));\n\t\tconst expression = node.getAttribute(`(${event})`);\n\t\tif (expression) {\n\t\t\tconst outputFunction = module.makeFunction(expression, ['$event']);\n\t\t\tevent$.pipe(\n\t\t\t\ttakeUntil(this.unsubscribe$)\n\t\t\t).subscribe(event => {\n\t\t\t\t// console.log(parentInstance);\n\t\t\t\tmodule.resolve(outputFunction, parentInstance, event);\n\t\t\t});\n\t\t} else {\n\t\t\tparentInstance[`${event}$`] = event$;\n\t\t}\n\t\t// console.log('EventDirective.onInit', 'selector', selector, 'event', event);\n\t}\n\n}\n\nEventDirective.meta = {\n\tselector: `[(${EVENTS.join(')],[(')})]`,\n};\n","import Context from '../core/context';\n// import Component from '../component/component';\n\nexport default class ForItem extends Context {\n\n\t// !!! try with payload options { key, $key, value, $value, index, count } or use onInit()\n\n\tconstructor(key, $key, value, $value, index, count, parentInstance) {\n\t\t// console.log('ForItem', arguments);\n\t\tsuper(parentInstance);\n\t\t/*\n\t\tsuper(parentInstance, {\n\t\t\t[key]: {\n\t\t\t\tget: function() {\n\t\t\t\t\treturn this.$key;\n\t\t\t\t},\n\t\t\t\tset: function(key) {\n\t\t\t\t\tthis.$key = key;\n\t\t\t\t}\n\t\t\t},\n\t\t\t[value]: {\n\t\t\t\tget: function() {\n\t\t\t\t\treturn this.$value;\n\t\t\t\t},\n\t\t\t\tset: function(value) {\n\t\t\t\t\tthis.$value = value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t*/\n\t\tthis[key] = $key;\n\t\tthis[value] = $value;\n\t\tthis.index = index;\n\t\tthis.count = count;\n\t}\n\n\tget first() { return this.index === 0; }\n\n\tget last() { return this.index === this.count - 1; }\n\n\tget even() { return this.index % 2 === 0; }\n\n\tget odd() { return !this.even; }\n\n}\n","import Structure from '../core/structure';\nimport Module from '../module/module';\nimport ForItem from './for.item';\n\nexport default class ForStructure extends Structure {\n\n\tonInit() {\n\t\tconst context = Module.getContext(this);\n\t\tconst module = context.module;\n\t\tconst node = context.node;\n\t\tconst forbegin = this.forbegin = document.createComment(`*for begin`);\n\t\tnode.parentNode.replaceChild(forbegin, node);\n\t\tconst forend = this.forend = document.createComment(`*for end`);\n\t\tforbegin.parentNode.insertBefore(forend, forbegin.nextSibling);\n\t\tconst expression = node.getAttribute('*for');\n\t\tnode.removeAttribute('*for');\n\t\tconst tokens = this.tokens = this.getExpressionTokens(expression);\n\t\tthis.forFunction = module.makeFunction(tokens.iterable);\n\t\tthis.instances = [];\n\t}\n\n\tonChanges(changes) {\n\t\tconst context = Module.getContext(this);\n\t\tconst module = context.module;\n\t\tconst node = context.node;\n\t\t// resolve\n\t\tconst tokens = this.tokens;\n\t\tlet result = module.resolve(this.forFunction, changes, this) || [];\n\t\tconst isArray = Array.isArray(result);\n\t\tconst array = isArray ? result : Object.keys(result);\n\t\tconst total = array.length;\n\t\tconst previous = this.instances.length;\n\t\tlet nextSibling = this.forbegin.nextSibling;\n\t\tfor (let i = 0; i < Math.max(previous, total); i++) {\n\t\t\tif (i < total) {\n\t\t\t\tconst key = isArray ? i : array[i];\n\t\t\t\tconst value = isArray ? array[key] : result[key];\n\t\t\t\tif (i < previous) {\n\t\t\t\t\t// update\n\t\t\t\t\t// const clonedNode = nextSibling;\n\t\t\t\t\tconst instance = this.instances[i];\n\t\t\t\t\tinstance[tokens.key] = key;\n\t\t\t\t\tinstance[tokens.value] = value;\n\t\t\t\t\t// module.parse(clonedNode, instance);\n\t\t\t\t\tnextSibling = nextSibling.nextSibling;\n\t\t\t\t} else {\n\t\t\t\t\t// create\n\t\t\t\t\tconst clonedNode = node.cloneNode(true);\n\t\t\t\t\tthis.forend.parentNode.insertBefore(clonedNode, this.forend);\n\t\t\t\t\tconst args = [tokens.key, key, tokens.value, value, i, total, context.parentInstance]; // !!! context.parentInstance unused?\n\t\t\t\t\tconst instance = module.makeInstance(clonedNode, ForItem, context.selector, context.parentInstance, args);\n\t\t\t\t\tconst forItemContext = Module.getContext(instance);\n\t\t\t\t\t// console.log(clonedNode, forItemContext.instance.constructor.name);\n\t\t\t\t\tmodule.compile(clonedNode, forItemContext.instance);\n\t\t\t\t\t// module.parse(clonedNode, instance);\n\t\t\t\t\tnextSibling = clonedNode.nextSibling;\n\t\t\t\t\tthis.instances.push(instance);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// remove\n\t\t\t\tconst instance = this.instances[i];\n\t\t\t\tconst context = Module.getContext(instance);\n\t\t\t\tconst node = context.node;\n\t\t\t\tnode.parentNode.removeChild(node);\n\t\t\t\tmodule.remove(node);\n\t\t\t}\n\t\t}\n\t\tthis.instances.length = array.length;\n\t\t// console.log(this.instances, tokens);\n\t}\n\n\tgetExpressionTokens(expression) {\n\t\tif (expression === null) {\n\t\t\tthrow ('invalid for');\n\t\t}\n\t\tif (expression.trim().indexOf('let ') === -1 || expression.trim().indexOf(' of ') === -1) {\n\t\t\tthrow ('invalid for');\n\t\t}\n\t\tconst expressions = expression.split(';').map(x => x.trim()).filter(x => x !== '');\n\t\tconst forExpressions = expressions[0].split(' of ').map(x => x.trim());\n\t\tlet value = forExpressions[0].replace(/\\s*let\\s*/, '');\n\t\tconst iterable = forExpressions[1];\n\t\tlet key = 'index';\n\t\tconst keyValueMatches = value.match(/\\[(.+)\\s*,\\s*(.+)\\]/);\n\t\tif (keyValueMatches) {\n\t\t\tkey = keyValueMatches[1];\n\t\t\tvalue = keyValueMatches[2];\n\t\t}\n\t\tif (expressions.length > 1) {\n\t\t\tconst indexExpressions = expressions[1].split(/\\s*let\\s*|\\s*=\\s*index/).map(x => x.trim());\n\t\t\tif (indexExpressions.length === 3) {\n\t\t\t\tkey = indexExpressions[1];\n\t\t\t}\n\t\t}\n\t\treturn { key, value, iterable };\n\t}\n\n}\n\nForStructure.meta = {\n\tselector: '[*for]',\n};\n","import Structure from '../core/structure';\nimport Module from '../module/module';\n\nexport default class IfStructure extends Structure {\n\n\tonInit() {\n\t\tconst context = Module.getContext(this);\n\t\tconst module = context.module;\n\t\tconst node = context.node;\n\t\tconst ifbegin = this.ifbegin = document.createComment(`*if begin`);\n\t\tnode.parentNode.replaceChild(ifbegin, node);\n\t\tconst ifend = this.ifend = document.createComment(`*if end`);\n\t\tifbegin.parentNode.insertBefore(ifend, ifbegin.nextSibling);\n\t\tconst expression = node.getAttribute('*if');\n\t\tthis.expression = expression;\n\t\tthis.ifFunction = module.makeFunction(expression);\n\t\tconst clonedNode = node.cloneNode(true);\n\t\tclonedNode.removeAttribute('*if');\n\t\tthis.clonedNode = clonedNode;\n\t\t// console.log('expression', expression);\n\t}\n\n\tonChanges(changes) {\n\t\tconst context = Module.getContext(this);\n\t\tconst module = context.module;\n\t\t// console.log('IfStructure.onChanges', changes, this.expression);\n\t\tconst value = module.resolve(this.ifFunction, changes, this);\n\t\tif (value) {\n\t\t\tif (!this.clonedNode.parentNode) {\n\t\t\t\tthis.ifend.parentNode.insertBefore(this.clonedNode, this.ifend);\n\t\t\t\tmodule.compile(this.clonedNode);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.clonedNode.parentNode) {\n\t\t\t\tthis.clonedNode.parentNode.removeChild(this.clonedNode);\n\t\t\t\tmodule.remove(this.clonedNode);\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nIfStructure.meta = {\n\tselector: '[*if]',\n};\n","import Directive from '../core/directive';\nimport Module from '../module/module';\n\nexport default class InnerHtmlDirective extends Directive {\n\n\tonInit() {\n\t\tconst context = Module.getContext(this);\n\t\tconst node = context.node;\n\t\tconst selector = context.selector;\n\t\tconst key = selector.replace(/\\[(.+)\\]/, (...matches) => {\n\t\t\treturn matches[1];\n\t\t});\n\t\tlet expression = node.getAttribute(key);\n\t\tif (!expression) {\n\t\t\tthrow (`invalid ${key}`);\n\t\t}\n\t\tif (key === '[innerHTML]') {\n\t\t\texpression = `{{${expression}}}`;\n\t\t}\n\t\tthis.innerHtmlExpression = expression;\n\t\t// console.log('InnerHtmlDirective.onInit', node, expression, key);\n\t}\n\n\tonChanges(changes) {\n\t\tconst context = Module.getContext(this);\n\t\tconst innerHTML = context.module.evaluate(this.innerHtmlExpression, changes);\n\t\t// console.log('InnerHtmlDirective.onChanges', this.innerHtmlExpression, innerHTML);\n\t\tconst node = context.node;\n\t\tnode.innerHTML = innerHTML;\n\t}\n\n}\n\nInnerHtmlDirective.meta = {\n\tselector: `[[innerHTML]],[innerHTML]`\n};\n","export default class JsonPipe {\n\n\tstatic transform(value) {\n\t\treturn JSON.stringify(value);\n\t}\n\n}\n\nJsonPipe.meta = {\n\tname: 'json',\n};\n","import Directive from '../core/directive';\nimport Module from '../module/module';\n\nexport default class StyleDirective extends Directive {\n\n\tonInit() {\n\t\tconst context = Module.getContext(this);\n\t\tconst module = context.module;\n\t\tconst node = context.node;\n\t\tconst expression = node.getAttribute('[style]');\n\t\tthis.styleFunction = module.makeFunction(expression);\n\t\t// console.log('StyleDirective.onInit', expression);\n\t}\n\n\tonChanges(changes) {\n\t\tconst context = Module.getContext(this);\n\t\tconst module = context.module;\n\t\tconst node = context.node;\n\t\tconst style = module.resolve(this.styleFunction, changes, this);\n\t\tObject.keys(style).forEach(key => {\n\t\t\tnode.style[key] = style[key];\n\t\t});\n\t\t// console.log('StyleDirective.onChanges', changes, style);\n\t}\n\n}\n\nStyleDirective.meta = {\n\tselector: `[[style]]`\n};\n","export default class DatePipe {\n\n\tstatic transform(value, locale = 'it-IT-u-ca-gregory', options = {\n\t\tdateStyle: 'short',\n\t\ttimeStyle: 'short',\n\t}) {\n\t\tconst localeDateString = new Date(value).toLocaleDateString(locale, options);\n\t\treturn localeDateString;\n\t}\n\n}\n\nDatePipe.meta = {\n\tname: 'date',\n};\n","import { ClassDirective, Component, EventDirective, ForStructure, IfStructure, InnerHtmlDirective, JsonPipe, Module, StyleDirective } from '../../src/rxcomp';\nimport DatePipe from './date/date.pipe';\n\nclass TestComponent extends Component {\n\n\tonInit() {\n\t\t// console.log('TestComponent.onInit');\n\t\tthis.items = [1, 2];\n\t\tthis.object = { a: 1, b: 2 };\n\t\tthis.date = new Date();\n\t}\n\n}\n\nTestComponent.meta = {\n\tselector: '[test-component]',\n};\n\nModule.use({\n\tdebug: true,\n\tfactories: [\n\t\tClassDirective,\n\t\tEventDirective,\n\t\tForStructure,\n\t\tIfStructure,\n\t\tInnerHtmlDirective,\n\t\tStyleDirective,\n\t],\n\tpipes: [\n\t\tDatePipe,\n\t\tJsonPipe,\n\t],\n\tbootstrap: TestComponent,\n});\n"]}