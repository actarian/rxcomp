{"version":3,"file":"docs/js/main.js","sources":["../../src/core/factory.ts","../../src/core/directive.ts","../../src/core/component.ts","../../src/core/context.ts","../../src/core/structure.ts","../../src/module/module.ts","../../src/class/class.directive.ts","../../src/event/event.directive.ts","../../src/for/for.item.ts","../../src/for/for.structure.js","../../src/href/href.directive.ts","../../src/if/if.structure.js","../../src/inner-html/inner-html.directive.ts","../../src/core/pipe.ts","../../src/json/json.pipe.ts","../../src/src/src.directive.ts","../../src/style/style.directive.ts","../../src/core.module.ts","../../src/platform/platform.ts","../../src/platform/browser.ts","../../test/js/local-storage/local-storage.service.js","../../test/js/store/store.service.ts","../../test/js/app.component.ts","../../test/js/date/date.pipe.js","../../test/js/colors/colors.js","../../test/js/todo-item/todo-item.component.js","../../test/js/app.module.ts","../../test/js/main.ts"],"sourcesContent":["import { BehaviorSubject, Subject } from \"rxjs\";\n\nexport type SelectorFunction = (node: HTMLElement) => boolean;\n\nexport type ExpressionFunction = () => any;\n\nexport interface IFactoryMeta {\n\tselector: string;\n\thosts?: { [key: string]: typeof Factory };\n\tinputs?: string[];\n\toutputs?: string[];\n\ttemplate?: string;\n}\n\nexport class RxCompElement extends HTMLElement {\n\trxcompId?: number;\n}\n\nexport class RxCompText extends Text {\n\tnodeExpressions?: (ExpressionFunction | string)[];\n}\n\nexport default class Factory {\n\trxcompId?: number;\n\tchanges$?: BehaviorSubject<Factory>;\n\tunsubscribe$?: Subject<void>;\n\t/*\n\tonInit?: () => void;\n\tonChanges?: (changes: Factory) => void;\n\tonView?: () => void;\n\tonDestroy?: () => void;\n\t*/\n\tpushChanges?: Function;\n\tstatic meta: IFactoryMeta;\n\n\tconstructor(...args: any[]) {\n\n\t}\n}\n","import Factory from './factory';\n\nexport default class Directive extends Factory {\n}\n","import Factory from './factory';\n\nexport default class Component extends Factory {\n}\n","// import { BehaviorSubject, Subject } from 'rxjs';\nimport Component from './component';\nimport Factory from './factory';\n\nconst RESERVED_PROPERTIES = ['constructor', 'rxcompId', 'onInit', 'onChanges', 'onDestroy', 'pushChanges', 'changes$', 'unsubscribe$'];\n\nexport default class Context extends Component {\n\n\tconstructor(instance: Factory, descriptors = {}) {\n\t\tsuper();\n\t\tdescriptors = Context.mergeDescriptors(instance, instance, descriptors);\n\t\tdescriptors = Context.mergeDescriptors(Object.getPrototypeOf(instance), instance, descriptors);\n\t\t/*\n\t\tconst subjects = {\n\t\t\tchanges$: {\n\t\t\t\tvalue: new BehaviorSubject(this),\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t},\n\t\t\tunsubscribe$: {\n\t\t\t\tvalue: new Subject(),\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t}\n\t\t};\n\t\t*/\n\t\tObject.defineProperties(this, descriptors);\n\t}\n\n\tstatic mergeDescriptors(source, instance, descriptors = {}) {\n\t\tconst properties = Object.getOwnPropertyNames(source);\n\t\twhile (properties.length) {\n\t\t\tlet key = properties.shift();\n\t\t\tif (RESERVED_PROPERTIES.indexOf(key) === -1 && !descriptors.hasOwnProperty(key)) {\n\t\t\t\t// console.log('Context.mergeDescriptors', key, source[key]);\n\t\t\t\tconst descriptor = Object.getOwnPropertyDescriptor(source, key);\n\t\t\t\tif (typeof descriptor.value == \"function\") {\n\t\t\t\t\tdescriptor.value = (...args) => {\n\t\t\t\t\t\treturn instance[key].apply(instance, args);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tdescriptors[key] = descriptor;\n\t\t\t}\n\t\t}\n\t\treturn descriptors;\n\t}\n\n}\n","import Factory from './factory';\n\nexport default class Structure extends Factory {\n}\n","import { BehaviorSubject, Subject } from 'rxjs';\nimport { takeUntil, tap } from 'rxjs/operators';\nimport Component from '../core/component';\nimport Context from '../core/context';\nimport Factory, { ExpressionFunction, IFactoryMeta, RxCompElement, RxCompText, SelectorFunction } from '../core/factory';\nimport Pipe from '../core/pipe';\nimport Structure from '../core/structure';\n\nexport interface ModuleContext {\n\tmodule: Module;\n\tinstance: Factory;\n\tparentInstance: Factory | Window;\n\tnode: RxCompElement;\n\tfactory: typeof Factory;\n\tselector: string;\n\tinputs?: {};\n\toutputs?: {};\n}\n\nlet ID: number = 0;\nconst CONTEXTS: { [key: number]: ModuleContext } = {};\nconst NODES: { [key: number]: ModuleContext[] } = {};\n\nexport interface IModuleMeta {\n\tdeclarations?: (typeof Factory | typeof Pipe)[];\n\texports?: (typeof Factory | typeof Pipe)[];\n\timports?: (typeof Module | IModuleMeta)[];\n\tpipes?: { [key: string]: typeof Pipe };\n\tfactories?: typeof Factory[];\n\tselectors?: SelectorFunction[];\n\tbootstrap?: typeof Factory;\n\tnode?: RxCompElement;\n\tnodeInnerHTML?: string;\n}\n\nexport default class Module {\n\n\tmeta: IModuleMeta;\n\n\tcompile(node: RxCompElement, parentInstance: Factory | Window): Factory[] {\n\t\tlet componentNode;\n\t\tconst instances = Module.querySelectorsAll(node, this.meta.selectors, []).map(match => {\n\t\t\tif (componentNode && componentNode !== match.node) {\n\t\t\t\tparentInstance = undefined;\n\t\t\t}\n\t\t\tconst instance = this.makeInstance(match.node, match.factory, match.selector, parentInstance);\n\t\t\tif (match.factory.prototype instanceof Component) {\n\t\t\t\tcomponentNode = match.node;\n\t\t\t}\n\t\t\treturn instance;\n\t\t}).filter(x => x);\n\t\t// console.log('compile', instances, node, parentInstance);\n\t\treturn instances;\n\t}\n\n\tmakeInstance(node: RxCompElement, factory: typeof Factory, selector: string, parentInstance: Factory | Window, args?: any[]): Factory | void {\n\t\tif (parentInstance || node.parentNode) {\n\t\t\tconst isComponent = factory.prototype instanceof Component;\n\t\t\tconst meta = factory.meta;\n\t\t\t// console.log('meta', meta, factory);\n\t\t\t// collect parentInstance scope\n\t\t\tparentInstance = parentInstance || this.getParentInstance(node.parentNode);\n\t\t\tif (!parentInstance) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// creating factory instance\n\t\t\tconst instance = new factory(...(args || []));\n\t\t\t// creating instance context\n\t\t\tconst context = Module.makeContext(this, instance, parentInstance, node, factory, selector);\n\t\t\t// injecting changes$ and unsubscribe$ subjects\n\t\t\tObject.defineProperties(instance, {\n\t\t\t\tchanges$: {\n\t\t\t\t\tvalue: new BehaviorSubject(instance),\n\t\t\t\t\twritable: false,\n\t\t\t\t\tenumerable: false,\n\t\t\t\t},\n\t\t\t\tunsubscribe$: {\n\t\t\t\t\tvalue: new Subject(),\n\t\t\t\t\twritable: false,\n\t\t\t\t\tenumerable: false,\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet initialized;\n\t\t\t// injecting instance pushChanges method\n\t\t\tconst module = this;\n\t\t\tinstance.pushChanges = function () {\n\t\t\t\t// console.log(new Error(`pushChanges ${instance.constructor.name}`).stack);\n\t\t\t\tthis.changes$.next(this);\n\t\t\t\t// parse component text nodes\n\t\t\t\tif (isComponent) {\n\t\t\t\t\t// console.log('Module.parse', instance.constructor.name);\n\t\t\t\t\tinitialized ? module.parse(node, instance) : setTimeout(function () { module.parse(node, instance); });\n\t\t\t\t}\n\t\t\t\t// calling onView event\n\t\t\t\tif (instance['onView']) {\n\t\t\t\t\t// console.log('onView', instance.constructor.name);\n\t\t\t\t\tinstance['onView']();\n\t\t\t\t}\n\t\t\t};\n\t\t\t// creating component input and outputs\n\t\t\t// if (isComponent && meta) {\n\t\t\tif (meta) {\n\t\t\t\tthis.makeHosts(meta, instance, node);\n\t\t\t\tcontext.inputs = this.makeInputs(meta, instance);\n\t\t\t\tcontext.outputs = this.makeOutputs(meta, instance);\n\t\t\t}\n\t\t\t// calling onInit event\n\t\t\tif (instance['onInit']) {\n\t\t\t\tinstance['onInit']();\n\t\t\t}\n\t\t\tinitialized = true;\n\t\t\t// subscribe to parent changes\n\t\t\tif (parentInstance instanceof Factory && parentInstance.changes$) {\n\t\t\t\tparentInstance.changes$.pipe(\n\t\t\t\t\t// filter(() => node.parentNode),\n\t\t\t\t\t// debounceTime(1),\n\t\t\t\t\t/*\n\t\t\t\t\tdistinctUntilChanged(function(prev, curr) {\n\t\t\t\t\t\tconsole.log(isComponent, context.inputs);\n\t\t\t\t\t\tif (isComponent && meta && Object.keys(context.inputs).length === 0) {\n\t\t\t\t\t\t\treturn true; // same\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\t*/\n\t\t\t\t\ttakeUntil(instance.unsubscribe$)\n\t\t\t\t).subscribe(changes => {\n\t\t\t\t\t// resolve component input outputs\n\t\t\t\t\t// if (isComponent && meta) {\n\t\t\t\t\tif (meta) {\n\t\t\t\t\t\tthis.resolveInputsOutputs(instance, changes);\n\t\t\t\t\t}\n\t\t\t\t\t// calling onChanges event with parentInstance\n\t\t\t\t\tif (instance['onChanges']) {\n\t\t\t\t\t\t// console.log('onChanges', instance.constructor.name);\n\t\t\t\t\t\t// console.log('onChanges', instance.constructor.meta.selector, changes);\n\t\t\t\t\t\tinstance['onChanges'](changes);\n\t\t\t\t\t}\n\t\t\t\t\t// push instance changes for subscribers\n\t\t\t\t\tinstance.pushChanges();\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn instance;\n\t\t}\n\t}\n\n\tmakeContext(instance: Factory, parentInstance: Factory | Window, node: RxCompElement, selector: string): ModuleContext {\n\t\tconst context = Module.makeContext(this, instance, parentInstance, node, instance.constructor as typeof Factory, selector);\n\t\t// console.log('Module.makeContext', context, context.instance, context.node);\n\t\treturn context;\n\t}\n\n\tmakeFunction(expression: string, params: string[] = ['$instance']): ExpressionFunction {\n\t\tif (expression) {\n\t\t\texpression = Module.parseExpression(expression);\n\t\t\t// console.log(expression);\n\t\t\tconst args: string = params.join(',');\n\t\t\tconst expression_func: ExpressionFunction = new Function(`with(this) {\n\t\t\t\treturn (function (${args}, $$module) {\n\t\t\t\t\tconst $$pipes = $$module.meta.pipes;\n\t\t\t\t\treturn ${expression};\n\t\t\t\t}.bind(this)).apply(this, arguments);\n\t\t\t}`) as ExpressionFunction;\n\t\t\t// console.log(expression_func);\n\t\t\treturn expression_func;\n\t\t} else {\n\t\t\treturn () => { return null; };\n\t\t}\n\t}\n\n\tgetInstance(node: HTMLElement | Document): Factory | Window {\n\t\tif (node instanceof Document) {\n\t\t\treturn window; // !!! window or global\n\t\t}\n\t\tconst context: ModuleContext | void = getContextByNode(node);\n\t\tif (context) {\n\t\t\treturn context.instance;\n\t\t}\n\t}\n\n\tgetParentInstance(node: Node): Factory | Window {\n\t\treturn Module.traverseUp(node, (node: Node) => {\n\t\t\treturn this.getInstance(node as HTMLElement);\n\t\t});\n\t}\n\n\tparse(node: HTMLElement, instance: Factory): void {\n\t\tfor (let i = 0; i < node.childNodes.length; i++) {\n\t\t\tconst child: ChildNode = node.childNodes[i];\n\t\t\tif (child.nodeType === 1) {\n\t\t\t\tconst htmlNode: HTMLElement = child as HTMLElement;\n\t\t\t\tconst context: ModuleContext | void = getContextByNode(htmlNode);\n\t\t\t\tif (!context) {\n\t\t\t\t\tthis.parse(htmlNode, instance);\n\t\t\t\t}\n\t\t\t} else if (child.nodeType === 3) {\n\t\t\t\tconst text: Text = child as Text;\n\t\t\t\tthis.parseTextNode(text, instance);\n\t\t\t}\n\t\t}\n\t}\n\n\t// reduce(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: T[]) => T, initialValue: T): T;\n\n\tparseTextNode(node: RxCompText, instance: Factory): void {\n\t\tlet expressions: (ExpressionFunction | string)[] = node.nodeExpressions;\n\t\tif (!expressions) {\n\t\t\texpressions = this.parseTextNodeExpression(node.nodeValue);\n\t\t}\n\t\tconst replacedText: string = expressions.reduce((p: string, c: ExpressionFunction | string) => {\n\t\t\tlet text: string;\n\t\t\tif (typeof c === 'function') { // instanceOf ExpressionFunction ?;\n\t\t\t\ttext = this.resolve(c as ExpressionFunction, instance, instance);\n\t\t\t\tif (text == undefined) { // !!! keep == loose equality\n\t\t\t\t\ttext = '';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttext = c;\n\t\t\t}\n\t\t\treturn p + text;\n\t\t}, '') as string;\n\t\tif (node.nodeValue !== replacedText) {\n\t\t\tconst textNode: RxCompText = document.createTextNode(replacedText) as RxCompText;\n\t\t\ttextNode.nodeExpressions = expressions;\n\t\t\tnode.parentNode.replaceChild(textNode, node);\n\t\t}\n\t}\n\n\tpushFragment(nodeValue: string, from: number, to: number, expressions: (ExpressionFunction | string)[]): void {\n\t\tconst fragment = nodeValue.substring(from, to);\n\t\texpressions.push(fragment);\n\t};\n\n\tparseTextNodeExpression(nodeValue: string): (ExpressionFunction | string)[] {\n\t\tconst expressions: (ExpressionFunction | string)[] = [];\n\t\tconst regex: RegExp = /\\{{2}((([^{}])|(\\{([^{}]|(\\{.*?\\}))+?\\}))*?)\\}{2}/g;\n\t\tlet lastIndex: number = 0,\n\t\t\tmatches: RegExpExecArray;\n\t\t/*\n\t\tconst pushFragment = function (from: number, to: number): void {\n\t\t\tconst fragment = nodeValue.substring(from, to);\n\t\t\texpressions.push(fragment);\n\t\t};\n\t\t*/\n\t\twhile ((matches = regex.exec(nodeValue)) !== null) {\n\t\t\tconst index: number = regex.lastIndex - matches[0].length;\n\t\t\tif (index > lastIndex) {\n\t\t\t\tthis.pushFragment(nodeValue, index, lastIndex, expressions);\n\t\t\t}\n\t\t\tlastIndex = regex.lastIndex;\n\t\t\tconst expression: ExpressionFunction = this.makeFunction(matches[1]);\n\t\t\texpressions.push(expression);\n\t\t}\n\t\tconst length: number = nodeValue.length;\n\t\tif (length > lastIndex) {\n\t\t\tthis.pushFragment(nodeValue, lastIndex, length, expressions);\n\t\t}\n\t\treturn expressions;\n\t}\n\n\tresolve(expression: ExpressionFunction, parentInstance: Factory | Window, payload: any): any {\n\t\t// console.log(expression, parentInstance, payload);\n\t\treturn expression.apply(parentInstance, [payload, this]);\n\t}\n\n\tmakeHosts(meta: IFactoryMeta, instance: Factory, node: RxCompElement) {\n\t\tif (meta.hosts) {\n\t\t\tObject.keys(meta.hosts).forEach((key: string) => {\n\t\t\t\tconst factory: typeof Factory = meta.hosts[key];\n\t\t\t\tinstance[key] = getHost(instance, factory, node);\n\t\t\t});\n\t\t}\n\t}\n\n\tmakeInput(instance, key) {\n\t\tconst { node } = getContext(instance);\n\t\tlet input, expression = null;\n\t\tif (node.hasAttribute(key)) {\n\t\t\t// const attribute = node.getAttribute(key).replace(/{{/g, '\"+').replace(/}}/g, '+\"');\n\t\t\tconst attribute = node.getAttribute(key).replace(/({{)|(}})|(\")/g, function (match, a, b, c) {\n\t\t\t\tif (a) {\n\t\t\t\t\treturn '\"+';\n\t\t\t\t}\n\t\t\t\tif (b) {\n\t\t\t\t\treturn '+\"';\n\t\t\t\t}\n\t\t\t\tif (c) {\n\t\t\t\t\treturn '\\\"';\n\t\t\t\t}\n\t\t\t});\n\t\t\texpression = `\"${attribute}\"`;\n\t\t} else if (node.hasAttribute(`[${key}]`)) {\n\t\t\texpression = node.getAttribute(`[${key}]`);\n\t\t}\n\t\tif (expression !== null) {\n\t\t\tinput = this.makeFunction(expression);\n\t\t}\n\t\treturn input;\n\t}\n\n\tmakeInputs(meta, instance) {\n\t\tconst inputs = {};\n\t\tif (meta.inputs) {\n\t\t\tmeta.inputs.forEach((key, i) => {\n\t\t\t\tconst input = this.makeInput(instance, key);\n\t\t\t\tif (input) {\n\t\t\t\t\tinputs[key] = input;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn inputs;\n\t}\n\n\tmakeOutput(instance, key) {\n\t\tconst context = getContext(instance);\n\t\tconst node = context.node;\n\t\tconst parentInstance = context.parentInstance;\n\t\tconst expression = node.getAttribute(`(${key})`);\n\t\tconst outputFunction = this.makeFunction(expression, ['$event']);\n\t\tconst output$ = new Subject().pipe(\n\t\t\ttap((event) => {\n\t\t\t\tthis.resolve(outputFunction, parentInstance, event);\n\t\t\t})\n\t\t);\n\t\toutput$.pipe(\n\t\t\ttakeUntil(instance.unsubscribe$)\n\t\t).subscribe();\n\t\tinstance[key] = output$;\n\t\treturn outputFunction;\n\t}\n\n\tmakeOutputs(meta, instance) {\n\t\tconst outputs = {};\n\t\tif (meta.outputs) {\n\t\t\tmeta.outputs.forEach((key, i) => outputs[key] = this.makeOutput(instance, key));\n\t\t}\n\t\treturn outputs;\n\t}\n\n\tresolveInputsOutputs(instance, changes) {\n\t\tconst context = getContext(instance);\n\t\tconst parentInstance = context.parentInstance;\n\t\tconst inputs = context.inputs;\n\t\tfor (let key in inputs) {\n\t\t\tconst inputFunction = inputs[key];\n\t\t\tconst value = this.resolve(inputFunction, parentInstance, instance);\n\t\t\tinstance[key] = value;\n\t\t}\n\t\t/*\n\t\tconst outputs = context.outputs;\n\t\tfor (let key in outputs) {\n\t\t\tconst inpuoutputFunctiontFunction = outputs[key];\n\t\t\tconst value = this.resolve(outputFunction, parentInstance, null);\n\t\t\t// console.log(`setted -> ${key}`, value);\n\t\t}\n\t\t*/\n\t}\n\n\tdestroy() {\n\t\tthis.remove(this.meta.node);\n\t\tthis.meta.node.innerHTML = this.meta.nodeInnerHTML;\n\t}\n\n\tremove(node, keepInstance?: any) {\n\t\tconst keepContext = keepInstance ? getContext(keepInstance) : undefined;\n\t\tModule.traverseDown(node, (node: RxCompElement) => {\n\t\t\tconst rxcompId = node.rxcompId;\n\t\t\tif (rxcompId) {\n\t\t\t\tconst keepContexts = Module.deleteContext(rxcompId, keepContext);\n\t\t\t\tif (keepContexts.length === 0) {\n\t\t\t\t\tdelete node.rxcompId;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn node;\n\t}\n\n\tstatic parseExpression(expression: string): string {\n\t\tconst l = '┌';\n\t\tconst r = '┘';\n\t\tconst rx1 = /(\\()([^\\(\\)]*)(\\))/;\n\t\twhile (expression.match(rx1)) {\n\t\t\texpression = expression.replace(rx1, function (...g1) {\n\t\t\t\treturn `${l}${Module.parsePipes(g1[2])}${r}`;\n\t\t\t});\n\t\t}\n\t\texpression = Module.parsePipes(expression);\n\t\texpression = expression.replace(/(┌)|(┘)/g, function (...g2) {\n\t\t\treturn g2[1] ? '(' : ')';\n\t\t});\n\t\treturn Module.parseOptionalChaining(expression);\n\t}\n\n\tstatic parsePipes(expression: string): string {\n\t\tconst l: string = '┌';\n\t\tconst r: string = '┘';\n\t\tconst rx1: RegExp = /(.*?[^\\|])\\|([^\\|]+)/;\n\t\twhile (expression.match(rx1)) {\n\t\t\texpression = expression.replace(rx1, function (substring: string, ...args: any[]) {\n\t\t\t\tconst value: string = args[0].trim();\n\t\t\t\tconst params: string[] = Module.parsePipeParams(args[1]);\n\t\t\t\tconst func: string = params.shift().trim();\n\t\t\t\treturn `$$pipes.${func}.transform┌${[value, ...params]}┘`;\n\t\t\t});\n\t\t}\n\t\treturn expression;\n\t}\n\n\tstatic parsePipeParams(expression: string): string[] {\n\t\tconst segments: string[] = [];\n\t\tlet i: number = 0,\n\t\t\tword: string = '',\n\t\t\tblock: number = 0;\n\t\tconst t: number = expression.length;\n\t\twhile (i < t) {\n\t\t\tconst c: string = expression.substr(i, 1);\n\t\t\tif (c === '{' || c === '(' || c === '[') {\n\t\t\t\tblock++;\n\t\t\t}\n\t\t\tif (c === '}' || c === ')' || c === ']') {\n\t\t\t\tblock--;\n\t\t\t}\n\t\t\tif (c === ':' && block === 0) {\n\t\t\t\tif (word.length) {\n\t\t\t\t\tsegments.push(word.trim());\n\t\t\t\t}\n\t\t\t\tword = '';\n\t\t\t} else {\n\t\t\t\tword += c;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\t\tif (word.length) {\n\t\t\tsegments.push(word.trim());\n\t\t}\n\t\treturn segments;\n\t}\n\n\tstatic parseOptionalChaining(expression: string): string {\n\t\tconst regex: RegExp = /(\\w+(\\?\\.))+([\\.|\\w]+)/g;\n\t\tlet previous: string;\n\t\texpression = expression.replace(regex, function (substring: string, ...args: any[]) {\n\t\t\tconst tokens: string[] = substring.split('?.');\n\t\t\tfor (let i: number = 0; i < tokens.length - 1; i++) {\n\t\t\t\tconst a: string = i > 0 ? `(${tokens[i]} = ${previous})` : tokens[i];\n\t\t\t\tconst b: string = tokens[i + 1];\n\t\t\t\tprevious = i > 0 ? `${a}.${b}` : `(${a} ? ${a}.${b} : void 0)`;\n\t\t\t}\n\t\t\treturn previous || '';\n\t\t});\n\t\treturn expression;\n\t}\n\n\tstatic makeContext(module: Module, instance: Factory, parentInstance: Factory | Window, node: RxCompElement, factory: typeof Factory, selector: string): ModuleContext {\n\t\tinstance.rxcompId = ++ID;\n\t\tconst context = { module, instance, parentInstance, node, factory, selector };\n\t\tconst rxcompNodeId = node.rxcompId = (node.rxcompId || instance.rxcompId);\n\t\tconst nodeContexts = NODES[rxcompNodeId] || (NODES[rxcompNodeId] = []);\n\t\tnodeContexts.push(context);\n\t\tCONTEXTS[instance.rxcompId] = context;\n\t\treturn context;\n\t}\n\n\tstatic deleteContext(id, keepContext) {\n\t\tconst keepContexts = [];\n\t\tconst nodeContexts = NODES[id];\n\t\tif (nodeContexts) {\n\t\t\tnodeContexts.forEach(context => {\n\t\t\t\tif (context === keepContext) {\n\t\t\t\t\tkeepContexts.push(keepContext);\n\t\t\t\t} else {\n\t\t\t\t\tconst instance = context.instance;\n\t\t\t\t\tinstance.unsubscribe$.next();\n\t\t\t\t\tinstance.unsubscribe$.complete();\n\t\t\t\t\tif (instance['onDestroy']) {\n\t\t\t\t\t\tinstance['onDestroy']();\n\t\t\t\t\t\tdelete CONTEXTS[instance.rxcompId];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (keepContexts.length) {\n\t\t\t\tNODES[id] = keepContexts;;\n\t\t\t} else {\n\t\t\t\tdelete NODES[id];\n\t\t\t}\n\t\t}\n\t\treturn keepContexts;\n\t}\n\n\tstatic matchSelectors(node, selectors, results) {\n\t\tfor (let i = 0; i < selectors.length; i++) {\n\t\t\tconst match = selectors[i](node);\n\t\t\tif (match) {\n\t\t\t\tconst factory = match.factory;\n\t\t\t\tif (factory.prototype instanceof Component && factory.meta.template) {\n\t\t\t\t\tnode.innerHTML = factory.meta.template;\n\t\t\t\t}\n\t\t\t\tresults.push(match);\n\t\t\t\tif (factory.prototype instanceof Structure) {\n\t\t\t\t\t// console.log('Structure', node);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn results;\n\t}\n\n\tstatic querySelectorsAll(node, selectors, results) {\n\t\tif (node.nodeType === 1) {\n\t\t\tconst matches = this.matchSelectors(node, selectors, []);\n\t\t\tresults = results.concat(matches);\n\t\t\tconst structure = matches.find(x => x.factory.prototype instanceof Structure);\n\t\t\tif (structure) {\n\t\t\t\treturn results;\n\t\t\t}\n\t\t\tconst childNodes = node.childNodes;\n\t\t\tfor (let i = 0; i < childNodes.length; i++) {\n\t\t\t\tresults = this.querySelectorsAll(childNodes[i], selectors, results);\n\t\t\t}\n\t\t}\n\t\treturn results;\n\t}\n\n\tstatic traverseUp(node: Node, callback: (node: Node, i: number) => any, i: number = 0): any {\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\t\tconst result = callback(node, i);\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t\treturn this.traverseUp(node.parentNode, callback, i + 1);\n\t}\n\n\tstatic traverseDown(node: Node, callback: (node: Node, i: number) => any, i: number = 0): any {\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\t\tlet result = callback(node, i);\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t\tif (node.nodeType === 1) {\n\t\t\tlet j = 0,\n\t\t\t\tt = node.childNodes.length;\n\t\t\twhile (j < t && !result) {\n\t\t\t\tresult = this.traverseDown(node.childNodes[j], callback, i + 1);\n\t\t\t\tj++;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tstatic traversePrevious(node: Node, callback: (node: Node, i: number) => any, i: number = 0): any {\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\t\tconst result = callback(node, i);\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t\treturn this.traversePrevious(node.previousSibling, callback, i + 1);\n\t}\n\n\tstatic traverseNext(node: Node, callback: (node: Node, i: number) => any, i: number = 0): any {\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\t\tconst result = callback(node, i);\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t\treturn this.traverseNext(node.nextSibling, callback, i + 1);\n\t}\n\n\tstatic meta: IModuleMeta;\n\n}\n\nexport function getContext(instance: Factory): ModuleContext {\n\treturn CONTEXTS[instance.rxcompId];\n}\n\nexport function getContextByNode(node: Node): ModuleContext | void {\n\tlet context: ModuleContext;\n\tconst rxcompId: number = node['rxcompId'];\n\tif (rxcompId) {\n\t\tconst nodeContexts: ModuleContext[] = NODES[rxcompId];\n\t\tif (nodeContexts) {\n\t\t\tcontext = nodeContexts.reduce((previous: ModuleContext, current: ModuleContext) => {\n\t\t\t\tif (current.factory.prototype instanceof Component) {\n\t\t\t\t\treturn current;\n\t\t\t\t} else if (current.factory.prototype instanceof Context) {\n\t\t\t\t\treturn previous ? previous : current;\n\t\t\t\t} else {\n\t\t\t\t\treturn previous;\n\t\t\t\t}\n\t\t\t}, null);\n\t\t\t// console.log(node.rxcompId, context);\n\t\t}\n\t}\n\treturn context;\n}\n\nexport function getHost(instance: Factory, factory: typeof Factory, node: RxCompElement) {\n\tif (!node) {\n\t\tnode = getContext(instance).node;\n\t}\n\tif (node.rxcompId) {\n\t\tconst nodeContexts: ModuleContext[] = NODES[node.rxcompId];\n\t\tif (nodeContexts) {\n\t\t\t// console.log(nodeContexts);\n\t\t\tfor (let i: number = 0; i < nodeContexts.length; i++) {\n\t\t\t\tconst context: ModuleContext = nodeContexts[i];\n\t\t\t\tif (context.instance !== instance) {\n\t\t\t\t\t// console.log(context.instance, instance);\n\t\t\t\t\tif (context.instance instanceof Factory) {\n\t\t\t\t\t\treturn context.instance;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (node.parentNode) {\n\t\treturn getHost(instance, factory, node.parentNode as RxCompElement);\n\t}\n}\n","import Directive from '../core/directive';\nimport { ExpressionFunction } from '../core/factory';\nimport { getContext } from '../module/module';\n\nexport default class ClassDirective extends Directive {\n\n\tclassFunction: ExpressionFunction;\n\n\tonInit() {\n\t\tconst { module, node } = getContext(this);\n\t\tconst expression = node.getAttribute('[class]');\n\t\tthis.classFunction = module.makeFunction(expression);\n\t\t// console.log('ClassDirective.onInit', this.classList, expression);\n\t}\n\n\tonChanges(changes) {\n\t\tconst { module, node } = getContext(this);\n\t\tconst classList = module.resolve(this.classFunction, changes, this);\n\t\tfor (let key in classList) {\n\t\t\tclassList[key] ? node.classList.add(key) : node.classList.remove(key);\n\t\t}\n\t\t// console.log('ClassDirective.onChanges', classList);\n\t}\n\n}\n\nClassDirective.meta = {\n\tselector: `[[class]]`,\n};\n","import { fromEvent, Observable } from 'rxjs';\nimport { shareReplay, takeUntil } from 'rxjs/operators';\nimport Directive from '../core/directive';\nimport { getContext } from '../module/module';\n\nconst EVENTS = ['mousedown', 'mouseup', 'mousemove', 'click', 'dblclick', 'mouseover', 'mouseout', 'mouseenter', 'mouseleave', 'contextmenu', 'touchstart', 'touchmove', 'touchend', 'keydown', 'keyup', 'input', 'change', 'loaded'];\n\nexport default class EventDirective extends Directive {\n\n\tevent: string;\n\tevent$: Observable<Event>;\n\n\tonInit() {\n\t\tconst { module, node, parentInstance, selector } = getContext(this);\n\t\tconst event = this.event = selector.replace(/\\[|\\]|\\(|\\)/g, '');\n\t\tconst event$ = this.event$ = fromEvent<Event>(node, event).pipe(shareReplay(1));\n\t\tconst expression = node.getAttribute(`(${event})`);\n\t\tif (expression) {\n\t\t\tconst outputFunction = module.makeFunction(expression, ['$event']);\n\t\t\tevent$.pipe(\n\t\t\t\ttakeUntil(this.unsubscribe$)\n\t\t\t).subscribe(event => {\n\t\t\t\t// console.log(parentInstance);\n\t\t\t\tmodule.resolve(outputFunction, parentInstance, event);\n\t\t\t});\n\t\t} else {\n\t\t\tparentInstance[`${event}$`] = event$;\n\t\t}\n\t\t// console.log('EventDirective.onInit', 'selector', selector, 'event', event);\n\t}\n\n}\n\nEventDirective.meta = {\n\tselector: `[(${EVENTS.join(')],[(')})]`,\n};\n","import Context from '../core/context';\nimport Factory from '../core/factory';\n\nexport default class ForItem extends Context {\n\n\tindex: number;\n\tcount: number;\n\t// !!! try with payload options { key, $key, value, $value, index, count } or use onInit()\n\n\tconstructor(key: string, $key: number | string, value: string, $value: any, index: number, count: number, parentInstance: Factory) {\n\t\t// console.log('ForItem', arguments);\n\t\tsuper(parentInstance);\n\t\t/*\n\t\tsuper(parentInstance, {\n\t\t\t[key]: {\n\t\t\t\tget: function() {\n\t\t\t\t\treturn this.$key;\n\t\t\t\t},\n\t\t\t\tset: function(key) {\n\t\t\t\t\tthis.$key = key;\n\t\t\t\t}\n\t\t\t},\n\t\t\t[value]: {\n\t\t\t\tget: function() {\n\t\t\t\t\treturn this.$value;\n\t\t\t\t},\n\t\t\t\tset: function(value) {\n\t\t\t\t\tthis.$value = value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t*/\n\t\tthis[key] = $key;\n\t\tthis[value] = $value;\n\t\tthis.index = index;\n\t\tthis.count = count;\n\t}\n\n\tget first(): boolean { return this.index === 0; }\n\n\tget last(): boolean { return this.index === this.count - 1; }\n\n\tget even(): boolean { return this.index % 2 === 0; }\n\n\tget odd(): boolean { return !this.even; }\n\n}\n","import Structure from '../core/structure';\nimport { getContext } from '../module/module';\nimport ForItem from './for.item';\n\nexport default class ForStructure extends Structure {\n\n\tonInit() {\n\t\tconst { module, node } = getContext(this);\n\t\tconst forbegin = this.forbegin = document.createComment(`*for begin`);\n\t\tforbegin.rxcompId = node.rxcompId;\n\t\tnode.parentNode.replaceChild(forbegin, node);\n\t\tconst forend = this.forend = document.createComment(`*for end`);\n\t\tforbegin.parentNode.insertBefore(forend, forbegin.nextSibling);\n\t\tconst expression = node.getAttribute('*for');\n\t\t// this.expression = expression;\n\t\tnode.removeAttribute('*for');\n\t\tconst tokens = this.tokens = this.getExpressionTokens(expression);\n\t\tthis.forFunction = module.makeFunction(tokens.iterable);\n\t\tthis.instances = [];\n\t}\n\n\tonChanges(changes) {\n\t\tconst context = getContext(this);\n\t\tconst module = context.module;\n\t\tconst node = context.node;\n\t\t// resolve\n\t\tconst tokens = this.tokens;\n\t\tlet result = module.resolve(this.forFunction, changes, this) || [];\n\t\tconst isArray = Array.isArray(result);\n\t\tconst array = isArray ? result : Object.keys(result);\n\t\tconst total = array.length;\n\t\tconst previous = this.instances.length;\n\t\t// let nextSibling = this.forbegin.nextSibling;\n\t\tfor (let i = 0; i < Math.max(previous, total); i++) {\n\t\t\tif (i < total) {\n\t\t\t\tconst key = isArray ? i : array[i];\n\t\t\t\tconst value = isArray ? array[key] : result[key];\n\t\t\t\tif (i < previous) {\n\t\t\t\t\t// update\n\t\t\t\t\tconst instance = this.instances[i];\n\t\t\t\t\tinstance[tokens.key] = key;\n\t\t\t\t\tinstance[tokens.value] = value;\n\t\t\t\t\t/*\n\t\t\t\t\tif (!nextSibling) {\n\t\t\t\t\t\tconst context = getContext(instance);\n\t\t\t\t\t\tconst node = context.node;\n\t\t\t\t\t\tthis.forend.parentNode.insertBefore(node, this.forend);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnextSibling = nextSibling.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t\t*/\n\t\t\t\t} else {\n\t\t\t\t\t// create\n\t\t\t\t\tconst clonedNode = node.cloneNode(true);\n\t\t\t\t\tdelete clonedNode.rxcompId;\n\t\t\t\t\tthis.forend.parentNode.insertBefore(clonedNode, this.forend);\n\t\t\t\t\tconst args = [tokens.key, key, tokens.value, value, i, total, context.parentInstance]; // !!! context.parentInstance unused?\n\t\t\t\t\tconst instance = module.makeInstance(clonedNode, ForItem, context.selector, context.parentInstance, args);\n\t\t\t\t\tconst forItemContext = getContext(instance);\n\t\t\t\t\t// console.log('ForStructure', clonedNode, forItemContext.instance.constructor.name);\n\t\t\t\t\tmodule.compile(clonedNode, forItemContext.instance);\n\t\t\t\t\t// nextSibling = clonedNode.nextSibling;\n\t\t\t\t\tthis.instances.push(instance);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// remove\n\t\t\t\tconst instance = this.instances[i];\n\t\t\t\tconst { node } = getContext(instance);\n\t\t\t\tnode.parentNode.removeChild(node);\n\t\t\t\tmodule.remove(node);\n\t\t\t}\n\t\t}\n\t\tthis.instances.length = array.length;\n\t\t// console.log('ForStructure', this.instances, tokens);\n\t}\n\n\tgetExpressionTokens(expression) {\n\t\tif (expression === null) {\n\t\t\tthrow ('invalid for');\n\t\t}\n\t\tif (expression.trim().indexOf('let ') === -1 || expression.trim().indexOf(' of ') === -1) {\n\t\t\tthrow ('invalid for');\n\t\t}\n\t\tconst expressions = expression.split(';').map(x => x.trim()).filter(x => x !== '');\n\t\tconst forExpressions = expressions[0].split(' of ').map(x => x.trim());\n\t\tlet value = forExpressions[0].replace(/\\s*let\\s*/, '');\n\t\tconst iterable = forExpressions[1];\n\t\tlet key = 'index';\n\t\tconst keyValueMatches = value.match(/\\[(.+)\\s*,\\s*(.+)\\]/);\n\t\tif (keyValueMatches) {\n\t\t\tkey = keyValueMatches[1];\n\t\t\tvalue = keyValueMatches[2];\n\t\t}\n\t\tif (expressions.length > 1) {\n\t\t\tconst indexExpressions = expressions[1].split(/\\s*let\\s*|\\s*=\\s*index/).map(x => x.trim());\n\t\t\tif (indexExpressions.length === 3) {\n\t\t\t\tkey = indexExpressions[1];\n\t\t\t}\n\t\t}\n\t\treturn { key, value, iterable };\n\t}\n\n}\n\nForStructure.meta = {\n\tselector: '[*for]',\n};\n","import Directive from '../core/directive';\nimport { getContext } from '../module/module';\n\nexport default class HrefDirective extends Directive {\n\n\thref: string;\n\n\tonChanges(changes) {\n\t\tconst { node } = getContext(this);\n\t\tnode.setAttribute('href', this.href);\n\t}\n\n}\n\nHrefDirective.meta = {\n\tselector: '[[href]]',\n\tinputs: ['href'],\n};\n","import Structure from '../core/structure';\nimport { getContext } from '../module/module';\n\nexport default class IfStructure extends Structure {\n\n\tonInit() {\n\t\tconst { module, node } = getContext(this);\n\t\tconst ifbegin = this.ifbegin = document.createComment(`*if begin`);\n\t\tifbegin.rxcompId = node.rxcompId;\n\t\tnode.parentNode.replaceChild(ifbegin, node);\n\t\tconst ifend = this.ifend = document.createComment(`*if end`);\n\t\tifbegin.parentNode.insertBefore(ifend, ifbegin.nextSibling);\n\t\tconst expression = node.getAttribute('*if');\n\t\tthis.ifFunction = module.makeFunction(expression);\n\t\tconst clonedNode = node.cloneNode(true);\n\t\tclonedNode.removeAttribute('*if');\n\t\tthis.clonedNode = clonedNode;\n\t\tthis.node = clonedNode.cloneNode(true);\n\t\t// console.log('IfStructure.expression', expression);\n\t}\n\n\tonChanges(changes) {\n\t\tconst { module } = getContext(this);\n\t\t// console.log('IfStructure.onChanges', changes);\n\t\tconst value = module.resolve(this.ifFunction, changes, this);\n\t\tconst node = this.node;\n\t\tif (value) {\n\t\t\tif (!node.parentNode) {\n\t\t\t\tthis.ifend.parentNode.insertBefore(node, this.ifend);\n\t\t\t\tmodule.compile(node);\n\t\t\t}\n\t\t} else {\n\t\t\tif (node.parentNode) {\n\t\t\t\tmodule.remove(node, this);\n\t\t\t\tnode.parentNode.removeChild(node);\n\t\t\t\tthis.node = this.clonedNode.cloneNode(true);\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nIfStructure.meta = {\n\tselector: '[*if]',\n};\n","import Directive from '../core/directive';\nimport { getContext } from '../module/module';\n\nexport default class InnerHtmlDirective extends Directive {\n\n\tinnerHTML: string;\n\n\tonChanges(changes) {\n\t\tconst { node } = getContext(this);\n\t\tnode.innerHTML = this.innerHTML == undefined ? '' : this.innerHTML; // !!! keep == loose equality\n\t}\n\n}\n\nInnerHtmlDirective.meta = {\n\tselector: `[innerHTML]`,\n\tinputs: ['innerHTML'],\n};\n","export default class Pipe {\n\n\tstatic transform(value: any): any {\n\t\treturn value;\n\t}\n\n\tstatic meta: any;\n}\n","import Pipe from \"../core/pipe\";\n\nexport default class JsonPipe extends Pipe {\n\n\tstatic transform(value: any): string {\n\t\treturn JSON.stringify(value, null, '\\t');\n\t}\n\n}\n\nJsonPipe.meta = {\n\tname: 'json',\n};\n","import Directive from '../core/directive';\nimport { getContext } from '../module/module';\n\nexport default class SrcDirective extends Directive {\n\n\tsrc: string;\n\n\tonChanges(changes) {\n\t\tconst { node } = getContext(this);\n\t\tnode.setAttribute('src', this.src);\n\t}\n\n}\n\nSrcDirective.meta = {\n\tselector: '[[src]]',\n\tinputs: ['src'],\n};\n","import Directive from '../core/directive';\nimport { ExpressionFunction } from '../core/factory';\nimport { getContext } from '../module/module';\n\nexport default class StyleDirective extends Directive {\n\n\tstyleFunction: ExpressionFunction;\n\n\tonInit() {\n\t\tconst { module, node } = getContext(this);\n\t\tconst expression = node.getAttribute('[style]');\n\t\tthis.styleFunction = module.makeFunction(expression);\n\t\t// console.log('StyleDirective.onInit', expression);\n\t}\n\n\tonChanges(changes) {\n\t\tconst { module, node } = getContext(this);\n\t\tconst style = module.resolve(this.styleFunction, changes, this);\n\t\tfor (let key in style) {\n\t\t\tnode.style.setProperty(key, style[key]);\n\t\t}\n\t\t// console.log('StyleDirective.onChanges', changes, style);\n\t}\n\n}\n\nStyleDirective.meta = {\n\tselector: `[[style]]`\n};\n","import ClassDirective from './class/class.directive';\nimport EventDirective from './event/event.directive';\nimport ForStructure from './for/for.structure';\nimport HrefDirective from './href/href.directive';\nimport IfStructure from './if/if.structure';\nimport InnerHtmlDirective from './inner-html/inner-html.directive';\nimport JsonPipe from './json/json.pipe';\nimport Module from './module/module';\nimport SrcDirective from './src/src.directive';\nimport StyleDirective from './style/style.directive';\n\nexport default class CoreModule extends Module { }\nconst factories = [\n\tClassDirective,\n\tEventDirective,\n\tForStructure,\n\tHrefDirective,\n\tIfStructure,\n\tInnerHtmlDirective,\n\tSrcDirective,\n\tStyleDirective,\n];\nconst pipes = [\n\tJsonPipe,\n];\nCoreModule.meta = {\n\tdeclarations: [\n\t\t...factories,\n\t\t...pipes,\n\t],\n\texports: [\n\t\t...factories,\n\t\t...pipes,\n\t]\n};\n","import Component from '../core/component';\nimport Directive from '../core/directive';\nimport Factory, { RxCompElement, SelectorFunction } from '../core/factory';\nimport Pipe from '../core/pipe';\nimport Structure from '../core/structure';\nimport Module, { IModuleMeta } from '../module/module';\n\nconst ORDER: (typeof Factory)[] = [Structure, Component, Directive];\n\nexport default class Platform {\n\n\tstatic bootstrap(moduleFactory: typeof Module): Module {\n\t\tconst meta = this.resolveMeta(moduleFactory);\n\t\tconsole.log(meta);\n\t\tconst bootstrap = meta.bootstrap;\n\t\tif (!bootstrap) {\n\t\t\tthrow ('missing bootstrap');\n\t\t}\n\t\tconst node = meta.node = this.querySelector(bootstrap.meta.selector);\n\t\tif (!node) {\n\t\t\tthrow (`missing node ${bootstrap.meta.selector}`);\n\t\t}\n\t\tmeta.nodeInnerHTML = node.innerHTML;\n\t\tconst pipes = meta.pipes = this.resolvePipes(meta);\n\t\tconst factories = meta.factories = this.resolveFactories(meta);\n\t\tthis.sortFactories(factories);\n\t\tfactories.unshift(bootstrap);\n\t\tconst selectors = meta.selectors = this.unwrapSelectors(factories);\n\t\tconst module = new moduleFactory();\n\t\tmodule.meta = meta;\n\t\tconst instances = module.compile(node, window);\n\t\tconst root = instances[0];\n\t\t// if (root instanceof module.meta.bootstrap) {\n\t\troot.pushChanges();\n\t\t// }\n\t\treturn module;\n\t}\n\n\tstatic querySelector(selector: string): RxCompElement | null {\n\t\treturn document.querySelector(selector);\n\t}\n\n\tstatic resolveMeta(moduleFactory: typeof Module): IModuleMeta {\n\t\tconst meta = Object.assign({ imports: [], declarations: [], pipes: [], exports: [] }, moduleFactory.meta);\n\t\tmeta.imports = meta.imports.map(moduleFactory => this.resolveMeta(moduleFactory));\n\t\treturn meta;\n\t}\n\n\tstatic resolvePipes(meta: IModuleMeta, exported?: boolean): { [key: string]: typeof Pipe } {\n\t\tconst importedPipes = meta.imports.map((importMeta: IModuleMeta) => this.resolvePipes(importMeta, true));\n\t\tconst pipes = {};\n\t\tconst pipeList: (typeof Factory | typeof Pipe)[] = (exported ? meta.exports : meta.declarations).filter((x: typeof Pipe) => x.prototype instanceof Pipe);\n\t\tpipeList.forEach(pipeFactory => pipes[pipeFactory.meta.name] = pipeFactory);\n\t\treturn Object.assign({}, ...importedPipes, pipes);\n\t}\n\n\tstatic resolveFactories(meta: IModuleMeta, exported?: boolean): (typeof Factory)[] {\n\t\tconst importedFactories = meta.imports.map((importMeta: IModuleMeta) => this.resolveFactories(importMeta, true));\n\t\tconst factoryList: (typeof Factory | typeof Pipe)[] = (exported ? meta.exports : meta.declarations).filter(x => (x.prototype instanceof Structure || x.prototype instanceof Component || x.prototype instanceof Directive));\n\t\treturn Array.prototype.concat.call(factoryList, ...importedFactories);\n\t}\n\n\tstatic sortFactories(factories: (typeof Factory)[]): void {\n\t\tfactories.sort((a, b) => {\n\t\t\tconst ai = ORDER.reduce((p, c, i) => a.prototype instanceof c ? i : p, -1);\n\t\t\tconst bi = ORDER.reduce((p, c, i) => b.prototype instanceof c ? i : p, -1);\n\t\t\t// return ai - bi;\n\t\t\tconst o = ai - bi;\n\t\t\tif (o === 0) {\n\t\t\t\treturn (a.meta.hosts ? 1 : 0) - (b.meta.hosts ? 1 : 0);\n\t\t\t}\n\t\t\treturn o;\n\t\t});\n\t}\n\n\tstatic getExpressions(selector: string): SelectorFunction[] {\n\t\tlet matchers = [];\n\t\tselector.replace(/\\.([\\w\\-\\_]+)|\\[(.+?\\]*)(\\=)(.*?)\\]|\\[(.+?\\]*)\\]|([\\w\\-\\_]+)/g, function (value: string, c1, a2, u3, v4, a5, e6) {\n\t\t\tif (c1) {\n\t\t\t\tmatchers.push(function (node) {\n\t\t\t\t\treturn node.classList.contains(c1);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (a2) {\n\t\t\t\tmatchers.push(function (node) {\n\t\t\t\t\treturn (node.hasAttribute(a2) && node.getAttribute(a2) === v4) ||\n\t\t\t\t\t\t(node.hasAttribute(`[${a2}]`) && node.getAttribute(`[${a2}]`) === v4);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (a5) {\n\t\t\t\tmatchers.push(function (node) {\n\t\t\t\t\treturn node.hasAttribute(a5) || node.hasAttribute(`[${a5}]`);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (e6) {\n\t\t\t\tmatchers.push(function (node) {\n\t\t\t\t\treturn node.nodeName.toLowerCase() === e6.toLowerCase();\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn '';\n\t\t});\n\t\treturn matchers;\n\t}\n\n\tstatic unwrapSelectors(factories: (typeof Factory)[]): SelectorFunction[] {\n\t\tconst selectors = [];\n\t\tfactories.forEach(factory => {\n\t\t\tfactory.meta.selector.split(',').forEach(selector => {\n\t\t\t\tselector = selector.trim();\n\t\t\t\tlet excludes = [];\n\t\t\t\tconst matchSelector = selector.replace(/\\:not\\((.+?)\\)/g, (value, unmatchSelector) => {\n\t\t\t\t\texcludes = this.getExpressions(unmatchSelector);\n\t\t\t\t\treturn '';\n\t\t\t\t});\n\t\t\t\tconst includes = this.getExpressions(matchSelector);\n\t\t\t\tselectors.push((node) => {\n\t\t\t\t\tconst include = includes.reduce((result, e) => {\n\t\t\t\t\t\treturn result && e(node);\n\t\t\t\t\t}, true);\n\t\t\t\t\tconst exclude = excludes.reduce((result, e) => {\n\t\t\t\t\t\treturn result || e(node);\n\t\t\t\t\t}, false);\n\t\t\t\t\tif (include && !exclude) {\n\t\t\t\t\t\treturn { node, factory, selector };\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t\treturn selectors;\n\t}\n\n\tstatic isBrowser(): boolean {\n\t\treturn Boolean(window);\n\t}\n\n\t// static isServer() {}\n\n}\n","import Platform from './platform';\n\nexport default class Browser extends Platform { }\n","export default class LocalStorageService {\n\n\tstatic delete(name) {\n\t\tif (this.isLocalStorageSupported()) {\n\t\t\twindow.localStorage.removeItem(name);\n\t\t}\n\t}\n\n\tstatic exist(name) {\n\t\tif (this.isLocalStorageSupported()) {\n\t\t\treturn window.localStorage[name] !== undefined;\n\t\t}\n\t}\n\n\tstatic get(name) {\n\t\tlet value = null;\n\t\tif (this.isLocalStorageSupported() && window.localStorage[name] !== undefined) {\n\t\t\ttry {\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('LocalStorageService.get.error parsing', name, e);\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\n\tstatic set(name, value) {\n\t\tif (this.isLocalStorageSupported()) {\n\t\t\ttry {\n\t\t\t\tconst cache = [];\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\n\t\t\t\t\t\t\t// Circular reference found, discard key\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcache.push(value);\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t});\n\t\t\t\twindow.localStorage.setItem(name, json);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('LocalStorageService.set.error serializing', name, value, e);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic isLocalStorageSupported() {\n\t\tif (this.supported) {\n\t\t\treturn true;\n\t\t}\n\t\tlet supported = false;\n\t\ttry {\n\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\n\t\t\tif (supported) {\n\t\t\t\twindow.localStorage.setItem('test', '1');\n\t\t\t\twindow.localStorage.removeItem('test');\n\t\t\t} else {\n\t\t\t\tsupported = false;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tsupported = false;\n\t\t}\n\t\tthis.supported = supported;\n\t\treturn supported;\n\t}\n\n}\n","import { BehaviorSubject, of } from 'rxjs';\nimport { delay } from 'rxjs/operators';\nimport LocalStorageService from '../local-storage/local-storage.service';\n\nexport default class StoreService {\n\n\tstatic store$: BehaviorSubject<any>;\n\n\tstatic set(items) {\n\t\tLocalStorageService.set('items', items);\n\t\treturn this.get$().next(items);\n\t}\n\n\tstatic get$(): BehaviorSubject<any> {\n\t\tif (this.store$) {\n\t\t\treturn this.store$;\n\t\t}\n\t\tlet items = LocalStorageService.get('items');\n\t\tif (!items) {\n\t\t\titems = [\n\t\t\t\t{ id: 5, name: 'Cookies', date: new Date(Date.now()) },\n\t\t\t\t{ id: 4, name: 'Pizza', date: new Date(2019, 4, 4, 12) },\n\t\t\t\t{ id: 3, name: 'Pasta', date: new Date(2019, 3, 22, 12) },\n\t\t\t\t{ id: 2, name: 'Bread', date: new Date(2019, 0, 6, 12) },\n\t\t\t\t{ id: 1, name: 'Ham', date: new Date(2018, 11, 30, 12) },\n\t\t\t];\n\t\t\tLocalStorageService.set('items', items);\n\t\t}\n\t\tthis.store$ = new BehaviorSubject(items);\n\t\treturn this.store$.pipe(\n\t\t\tdelay(1) // simulate http\n\t\t) as BehaviorSubject<any>;\n\t}\n\n\tstatic add$(patch) {\n\t\tconst item = Object.assign({\n\t\t\tid: Date.now(),\n\t\t\tdate: new Date(Date.now())\n\t\t}, patch);\n\t\tconst items = this.store$.getValue();\n\t\titems.unshift(item);\n\t\tthis.set(items);\n\t\treturn of(item).pipe(\n\t\t\tdelay(1) // simulate http\n\t\t);\n\t}\n\n\tstatic patch$(patch) {\n\t\tconst items = this.store$.getValue();\n\t\tconst item = items.find(x => x.id === patch.id);\n\t\tif (item) {\n\t\t\tObject.assign(item, patch);\n\t\t\tthis.set(items);\n\t\t}\n\t\treturn of(item).pipe(\n\t\t\tdelay(1) // simulate http\n\t\t);\n\t}\n\n\tstatic delete$(item) {\n\t\tconst items = this.store$.getValue();\n\t\tconst index = items.indexOf(item);\n\t\tif (index !== -1) {\n\t\t\titems.splice(index, 1);\n\t\t\tthis.set(items);\n\t\t}\n\t\treturn of(item).pipe(\n\t\t\tdelay(1) // simulate http\n\t\t);\n\t}\n\n}\n","import { BehaviorSubject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { Component, getContext } from '../../src/rxcomp';\nimport StoreService from './store/store.service';\n\nexport default class AppComponent extends Component {\n\n\tinput: HTMLInputElement;\n\titems: any[];\n\tstore$: BehaviorSubject<any>\n\n\tonInit() {\n\t\t// context\n\t\tconst context = getContext(this);\n\t\t// input\n\t\tthis.input = context.node.querySelector('.control--text');\n\t\t// items\n\t\tthis.items = [];\n\t\t// store service\n\t\tthis.store$ = StoreService.get$();\n\t\tthis.store$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe(items => {\n\t\t\tthis.items = items;\n\t\t\t// onpush change detection strategy\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tonInput($event) {\n\t\t// console.log('AppComponent.onInput', $event, this);\n\t\tthis.pushChanges();\n\t}\n\n\tonAddItem($event) {\n\t\tif (this.input.value) {\n\t\t\tStoreService.add$({\n\t\t\t\tname: this.input.value,\n\t\t\t}).subscribe(item => {\n\t\t\t\t// console.log('AppComponent.onAddItem', item);\n\t\t\t\tthis.input.value = null;\n\t\t\t});\n\t\t}\n\t}\n\n\tonToggleItem(item) {\n\t\tStoreService.patch$({\n\t\t\tid: item.id,\n\t\t\tdone: !item.done,\n\t\t}).subscribe(item => {\n\t\t\t// console.log('AppComponent.onToggleItem', item);\n\t\t});\n\t}\n\n\tonRemoveItem(item) {\n\t\tStoreService.delete$(item).subscribe(item => {\n\t\t\t// console.log('AppComponent.onRemoveItem', item);\n\t\t});\n\t}\n\n}\n\nAppComponent.meta = {\n\tselector: '[app-component]',\n};\n","import { Pipe } from \"../../../src/rxcomp\";\n\nexport default class DatePipe extends Pipe {\n\n\tstatic transform(value, locale = 'it-IT-u-ca-gregory', options = {\n\t\tdateStyle: 'short',\n\t\ttimeStyle: 'short',\n\t}) {\n\t\tconst localeDateString = new Date(value).toLocaleDateString(locale, options);\n\t\treturn localeDateString;\n\t}\n\n}\n\nDatePipe.meta = {\n\tname: 'date',\n};\n","export const colors = [\n\t{ hex: '#ffffff', background: '#ffffff', foreground: '#003adc', accent: '#212121' },\n\t{ hex: '#212121', background: '#212121', foreground: '#ffffff', accent: '#003adc' },\n\t{ hex: '#ffffff', background: '#ffffff', foreground: '#212121', accent: '#003adc' },\n\t{ hex: '#003adc', background: '#003adc', foreground: '#ffffff', accent: '#212121' },\n];\n\nexport function hexToInt(hex) {\n\treturn parseInt(hex.replace(/^#/, ''), 16);\n}\n\nexport function randomHex() {\n\treturn colors[Math.floor(Math.random() * colors.length)].hex;\n}\n\nexport function randomColor() {\n\tconst hex = randomHex();\n\treturn hexToInt(hex);\n}\n\nexport function color(index, alpha) {\n\treturn hexToRgb(colors[index % colors.length].hex, alpha);\n}\n\nexport function background(index, alpha) {\n\treturn hexToRgb(colors[index % colors.length].background, alpha);\n}\n\nexport function foreground(index, alpha) {\n\treturn hexToRgb(colors[index % colors.length].foreground, alpha);\n}\n\nexport function accent(index, alpha) {\n\treturn hexToRgb(colors[index % colors.length].accent, alpha);\n}\n\nlet index = -1;\n\nexport function nextHex() {\n\tindex++;\n\treturn colors[index % colors.length].hex;\n}\n\nexport function nextColor() {\n\tconst hex = nextHex();\n\treturn hexToInt(hex);\n}\n\nexport function hexToRgb(hex, a) {\n\tconst r = parseInt(hex.slice(1, 3), 16);\n\tconst g = parseInt(hex.slice(3, 5), 16);\n\tconst b = parseInt(hex.slice(5, 7), 16);\n\tif (a) {\n\t\treturn `rgba(${r},${g},${b},${a})`;\n\t} else {\n\t\treturn `rgb(${r},${g},${b})`;\n\t}\n}\n","import { Component } from '../../../src/rxcomp';\nimport { accent, background, foreground } from '../colors/colors';\n\nexport default class TodoItemComponent extends Component {\n\n\t// onInit() {}\n\n\tonChanges(changes) {\n\t\t// console.log('onChanges', changes);\n\t\tthis.background = background(this.item.id);\n\t\tthis.foreground = foreground(this.item.id);\n\t\tthis.accent = accent(this.item.id);\n\t}\n\n\t// onView() {}\n\n\t// onDestroy() {}\n\n\tonToggle($event) {\n\t\t// console.log('onToggle', $event);\n\t\tthis.toggle.next($event);\n\t}\n\n\tonRemove($event) {\n\t\t// console.log('onRemove', $event);\n\t\tthis.remove.next($event);\n\t}\n\n}\n\nTodoItemComponent.meta = {\n\tselector: '[todo-item-component]',\n\tinputs: ['item'],\n\toutputs: ['toggle', 'remove'],\n\t// template syntax example\n\t/*\n\ttemplate: // html // `\n\t\t<div class=\"content\" [style]=\"{ background: background, color: foreground, '--accent': accent }\">\n\t\t\t<button type=\"button\" class=\"btn--toggle\" (click)=\"onToggle(item)\">\n\t\t\t\t<i class=\"icon--check\" *if=\"item.done\"></i>\n\t\t\t\t<i class=\"icon--circle\" *if=\"!item.done\"></i>\n\t\t\t\t<div class=\"title\" [innerHTML]=\"item.name\"></div>\n\t\t\t</button>\n\t\t\t<div class=\"date\" [style]=\"{ background: backgroundColor, color: color }\" [innerHTML]=\"item.date | date : 'en-US' : { month: 'short', day: '2-digit', year: 'numeric' }\"></div>\n\t\t\t<button type=\"button\" class=\"btn--remove\" (click)=\"onRemove(item)\"><i class=\"icon--remove\"></i></button>\n\t\t</div>\n\t`,\n\t*/\n};\n","import { CoreModule, Module } from '../../src/rxcomp';\nimport AppComponent from './app.component';\nimport DatePipe from './date/date.pipe';\nimport TodoItemComponent from './todo-item/todo-item.component';\n\nexport default class AppModule extends Module { }\n\nAppModule.meta = {\n\timports: [\n\t\tCoreModule\n\t],\n\tdeclarations: [\n\t\tTodoItemComponent,\n\t\tDatePipe,\n\t],\n\tbootstrap: AppComponent,\n};\n","import { Browser } from '../../src/rxcomp';\nimport AppModule from './app.module';\n\nBrowser.bootstrap(AppModule);\n"],"names":["BehaviorSubject","Subject","takeUntil","tap","fromEvent","shareReplay","delay","of"],"mappings":"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"}